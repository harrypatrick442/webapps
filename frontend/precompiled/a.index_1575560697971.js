!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.datepicker=t():e.datepicker=t()}(window,function(){return function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],a=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==s.return||s.return()}finally{if(r)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n(2);var r=[],i=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],o=["January","February","March","April","May","June","July","August","September","October","November","December"],s={t:"top",r:"right",b:"bottom",l:"left",c:"centered"},l=["click","focusin","keydown","input"];function c(e){return Array.isArray(e)?e.map(c):"[object Object]"==={}.toString.call(e)?Object.keys(e).reduce(function(t,n){return t[n]=c(e[n]),t},{}):e}function d(e,t){var n=t.calendar.querySelector(".qs-overlay"),a=n&&!n.classList.contains("qs-hidden");t.calendar.innerHTML=[u(e,t,a),h(e,t,a),f(t,a)].join(""),a&&setTimeout(function(){return D(!0,t)},10)}function u(e,t,n){return'\n    <div class="qs-controls '.concat(n?"qs-blur":"",'">\n      <div class="qs-arrow qs-left"></div>\n      <div class="qs-month-year">\n        <span class="qs-month">').concat(t.months[e.getMonth()],'</span>\n        <span class="qs-year">').concat(e.getFullYear(),'</span>\n      </div>\n      <div class="qs-arrow qs-right"></div>\n    </div>\n  ')}function h(e,t,n){var a=t.currentMonth,r=t.currentYear,i=t.dateSelected,o=t.maxDate,s=t.minDate,l=t.showAllDates,c=t.days,d=t.disabledDates,u=t.disabler,h=t.noWeekends,f=t.startDay,v=t.weekendIndices,m=new Date,y=r===m.getFullYear()&&a===m.getMonth(),p=b(new Date(e).setDate(1)),q=p.getDay()-f,g=q<0?7:0;p.setMonth(p.getMonth()+1),p.setDate(0);var D=p.getDate(),w=[],S=g+7*((q+D)/7|0);S+=(q+D)%7?7:0,0!==f&&0===q&&(S+=7);for(var M=1;M<=S;M++){var x=(M-1)%7,Y=c[x],L=M-(q>=0?q:7+q),k=new Date(r,a,L),P=k.getDate(),O=L<1||L>D,j="",N='<span class="qs-num">'.concat(P,"</span>");if(O)j="qs-empty",l?j+=" qs-disabled":N="";else{var A=s&&k<s||o&&k>o||u&&u(k)||d.includes(+k),C=v.includes(x),E=y&&!A&&L===m.getDate();j=(A=A||h&&C)?"qs-disabled":E?"qs-current":""}+k!=+i||O||(j+=" qs-active"),w.push('<div class="qs-square qs-num '.concat(Y," ").concat(j,'">').concat(N,"</div>"))}var I=c.map(function(e){return'<div class="qs-square qs-day">'.concat(e,"</div>")}).concat(w);if(I.length%7!=0)throw"Calendar not constructed properly. The # of squares should be a multiple of 7.";return I.unshift('<div class="qs-squares '.concat(n?"qs-blur":"",'">')),I.push("</div>"),I.join("")}function f(e,t){var n=e.overlayPlaceholder,a=e.overlayButton,r=e.overlayMonths.map(function(e,t){return'\n      <div class="qs-overlay-month" data-month-num="'.concat(t,'">\n        <span data-month-num="').concat(t,'">').concat(e,"</span>\n      </div>\n  ")}).join("");return'\n    <div class="qs-overlay '.concat(t?"":"qs-hidden",'">\n      <div>\n        <input class="qs-overlay-year" placeholder="').concat(n,'" />\n        <div class="qs-close">&#10005;</div>\n      </div>\n      <div class="qs-overlay-month-container">').concat(r,'</div>\n      <div class="qs-submit qs-disabled">').concat(a,"</div>\n    </div>\n  ")}function v(e,t,n){var a=t.currentMonth,r=t.currentYear,i=t.calendar,o=t.el,s=t.onSelect,l=t.respectDisabledReadOnly,c=i.querySelector(".qs-active"),d=e.textContent;(o.disabled||o.readOnly)&&l||(t.dateSelected=n?void 0:new Date(r,a,d),c&&c.classList.remove("qs-active"),n||e.classList.add("qs-active"),m(o,t,n),!n&&q(t),s&&s(t,n?void 0:new Date(t.dateSelected)))}function m(e,t,n){if(!t.nonInput)return n?e.value="":t.formatter?t.formatter(e,t.dateSelected,t):void(e.value=t.dateSelected.toDateString())}function y(e,t,n,a){n||a?(n&&(t.currentYear=n),a&&(t.currentMonth=+a)):(t.currentMonth+=e.contains("qs-right")?1:-1,12===t.currentMonth?(t.currentMonth=0,t.currentYear++):-1===t.currentMonth&&(t.currentMonth=11,t.currentYear--)),t.currentMonthName=t.months[t.currentMonth],d(new Date(t.currentYear,t.currentMonth,1),t),t.onMonthChange&&t.onMonthChange(t)}function p(e){return"[object Date]"==={}.toString.call(e)&&"Invalid Date"!==e.toString()}function b(e){var t=new Date(+e);if(null!=e&&p(t))return new Date(t.getFullYear(),t.getMonth(),t.getDate())}function q(e){e.disabled||(D(!0,e),!e.alwaysShow&&e.calendar.classList.add("qs-hidden"),e.onHide&&e.onHide(e))}function g(e){e.disabled||(e.calendar.classList.remove("qs-hidden"),function(e){if(!e.noPosition){var t=e.el,n=e.calendar,r=e.position,i=e.parent,o=r.top,s=r.right;if(r.centered)return n.classList.add("qs-centered");var l=a([i,t,n].map(function(e){return e.getBoundingClientRect()}),3),c=l[0],d=l[1],u=l[2],h=d.top-c.top+i.scrollTop,f="\n    top:".concat(h-(o?u.height:-1*d.height),"px;\n    left:").concat(d.left-c.left+(s?d.width-u.width:0),"px;\n  ");n.setAttribute("style",f)}}(e),e.onShow&&e.onShow(e))}function D(e,t){var n=t.calendar,a=n.querySelector(".qs-overlay"),r=a.querySelector(".qs-overlay-year"),i=n.querySelector(".qs-controls"),o=n.querySelector(".qs-squares");e?(a.classList.add("qs-hidden"),i.classList.remove("qs-blur"),o.classList.remove("qs-blur"),r.value=""):(a.classList.remove("qs-hidden"),i.classList.add("qs-blur"),o.classList.add("qs-blur"),r.focus())}function w(e,t,n,a){var r=isNaN(+(new Date).setFullYear(t.value||void 0)),i=r?null:t.value;if(13===(e.which||e.keyCode)||"click"===e.type)a?y(null,n,i,a):r||t.classList.contains("qs-disabled")||y(null,n,i,a);else if(n.calendar.contains(t)){n.calendar.querySelector(".qs-submit").classList[r?"add":"remove"]("qs-disabled")}}function S(e){var t=e.type,n=e.target,i=n.classList,o=a(r.filter(function(e){var t=e.calendar,a=e.el;return t.contains(n)||a===n}),1)[0],s=o&&o.calendar.contains(n);if(!(o&&o.isMobile&&o.disableMobile))if("click"===t){if(!o)return r.forEach(q);if(o.disabled)return;var l=o.calendar,c=o.disableYearOverlay,d=l.querySelector(".qs-overlay-year"),u=!!l.querySelector(".qs-hidden"),h=l.querySelector(".qs-month-year").contains(n),f=n.dataset.monthNum;if(o.noPosition&&!s)(l.classList.contains("qs-hidden")?g:q)(o);else if(i.contains("qs-arrow"))y(i,o);else if(h||i.contains("qs-close"))!c&&D(!u,o);else if(f)w(e,d,o,f);else{if(i.contains("qs-num")){var m="SPAN"===n.nodeName?n.parentNode:n,p=["qs-disabled","qs-empty"].some(function(e){return m.classList.contains(e)});return m.classList.contains("qs-active")?v(m,o,!0):!p&&v(m,o)}i.contains("qs-submit")&&!i.contains("qs-disabled")&&w(e,d,o)}}else if("focusin"===t&&o)g(o),r.forEach(function(e){return e!==o&&q(e)});else if("keydown"===t&&o&&!o.disabled){var b=!o.calendar.querySelector(".qs-overlay").classList.contains("qs-hidden");13===(e.which||e.keyCode)&&b&&s?w(e,n,o):27===(e.which||e.keyCode)&&b&&s&&D(!0,o)}else if("input"===t){if(!o||!o.calendar.contains(n))return;var S=o.calendar.querySelector(".qs-submit"),M=n.value.split("").reduce(function(e,t){return e||"0"!==t?t.match(/[0-9]/)?e+t:e:""},"").slice(0,4);n.value=M,S.classList[4===M.length?"remove":"add"]("qs-disabled")}}function M(){g(this)}function x(){q(this)}function Y(e,t){var n=b(e),a=this.currentYear,r=this.currentMonth;if(void 0!==n&&!n)throw"`setDate` needs a JavaScript Date object.";if(void 0===n)return this.dateSelected=void 0,this.sibling&&(this.first?this.setMin():this.setMax()),m(this.el,this,!0),d(new Date(this.currentYear,this.currentMonth),this),this;if(this.disabledDates.some(function(e){return+e==+n})||n<this.minDate||n>this.maxDate)throw"You can't manually set a date that's disabled.";if(this.currentYear=n.getFullYear(),this.currentMonth=n.getMonth(),this.currentMonthName=this.months[n.getMonth()],this.dateSelected=n,m(this.el,this),(a===n.getFullYear()&&r===n.getMonth()||t)&&d(n,this),this.sibling){var i=this.first?"setMin":"setMax";this[i](n),this.sibling[i](n)}return this}function L(e){return P(this,e,!0)}function k(e){return P(this,e)}function P(e,t,n,a){if(null!=t&&!p(t))throw"Invalid date passed to set".concat(n?"Min":"Max");var r=e.dateSelected,i=b(t);if(n&&i>e.maxDate)throw"You can't set the minimum date past the maximum.";if(!n&&i<e.minDate)throw"You can't set the maximum date below the minimum.";return r&&(e.sibling?(n&&e.first||!n&&!e.first)&&(e.dateSelected=i):(n&&r<i||!n&&r>i)&&(e.dateSelected=void 0,e.nonInput||(e.el.value=""))),e[n?"minDate":"maxDate"]=i,d(r||e.startDate,e),!a&&e.sibling&&P(e.sibling,i,n,!0),e}function O(){var e=this,t=this.inlinePosition,n=this.parent,a=this.calendar,i=this.el,o=this.sibling;t&&(r.some(function(t){return t!==e&&t.parent===n})||n.style.setProperty("position",null));for(var s in a.remove(),r=r.filter(function(e){return e.el!==i}),o&&delete o.sibling,this)delete this[s];r.length||l.forEach(function(e){return document.removeEventListener(e,S)})}e.exports=function(e,t){r.length||l.forEach(function(e){return document.addEventListener(e,S)});var n=function(e,t){var n="string"==typeof e?document.querySelector(e):e,l=function(e,t){if(r.some(function(e){return e.el===t}))throw"A datepicker already exists on that element.";var n=c(e),o=n.position,l=n.maxDate,d=n.minDate,u=n.dateSelected,h=n.overlayPlaceholder,f=n.overlayButton,v=n.startDay,m=n.disabledDates;if(n.hasOwnProperty("id")&&null==n.id)throw"Id cannot be `null` or `undefined`";if(n.id){var y=r.reduce(function(e,t){return t.id===n.id&&e.push(t),e},[]);if(y.length>1)throw"Only two datepickers can share an id.";y.length&&(n.sibling=y[0])}n.disabledDates=(m||[]).map(function(e){if(!p(e))throw'You supplied an invalid date to "options.disabledDates".';if(+b(e)==+b(u))throw'"disabledDates" cannot contain the same date as "dateSelected".';return+b(e)});var q,g,D,w,S=["tr","tl","br","bl","c"].some(function(e){return o===e});if(o&&!S)throw'"options.position" must be one of the following: tl, tr, bl, br, or c.';if(n.position=(q=a(o||"bl",2),g=q[0],D=q[1],(w={})[s[g]]=1,D&&(w[s[D]]=1),w),["startDate","dateSelected","minDate","maxDate"].forEach(function(e){if(n[e]){if(!p(n[e])||isNaN(+n[e]))throw'"options.'.concat(e,'" needs to be a valid JavaScript Date object.');n[e]=b(n[e])}}),n.startDate=b(n.startDate||n.dateSelected||new Date),l<d)throw'"maxDate" in options is less than "minDate".';if(u){if(d>u)throw'"dateSelected" in options is less than "minDate".';if(l<u)throw'"dateSelected" in options is greater than "maxDate".'}if(["onSelect","onShow","onHide","onMonthChange","formatter","disabler"].forEach(function(e){n[e]="function"==typeof n[e]&&n[e]}),["customDays","customMonths","customOverlayMonths"].forEach(function(e,t){var a=n[e];if(a){if(!Array.isArray(a)||a.length!==(t?12:7)||a.some(function(e){return"string"!=typeof e}))throw function(e,t){return'"'.concat(e,'" must be an array with ').concat(t," strings.")}(e,t?12:7);n[t?t<2?"months":"overlayMonths":"days"]=a}}),v&&+v>0&&+v<7){var M=(n.customDays||i).slice(),x=M.splice(0,v);n.customDays=M.concat(x),n.startDay=+v,n.weekendIndices=[M.length-1,M.length]}else n.startDay=0,n.weekendIndices=[6,0];return"string"!=typeof h&&delete n.overlayPlaceholder,"string"!=typeof f&&delete n.overlayButton,n}(t||{startDate:b(new Date),position:"bl"},n),d=l.startDate,u=l.dateSelected,h=n===document.body,f=h?document.body:n.parentElement,v=document.createElement("div");v.className="qs-datepicker qs-hidden";var y={el:n,parent:f,nonInput:"INPUT"!==n.nodeName,noPosition:h,position:!h&&l.position,startDate:d,dateSelected:u,disabledDates:l.disabledDates,minDate:l.minDate,maxDate:l.maxDate,noWeekends:!!l.noWeekends,weekendIndices:l.weekendIndices,calendar:v,currentMonth:(d||u).getMonth(),currentMonthName:(l.months||o)[(d||u).getMonth()],currentYear:(d||u).getFullYear(),setDate:Y,remove:O,setMin:L,setMax:k,show:M,hide:x,onSelect:l.onSelect,onShow:l.onShow,onHide:l.onHide,onMonthChange:l.onMonthChange,formatter:l.formatter,disabler:l.disabler,months:l.months||o,days:l.customDays||i,startDay:l.startDay,overlayMonths:l.overlayMonths||(l.months||o).map(function(e){return e.slice(0,3)}),overlayPlaceholder:l.overlayPlaceholder||"4-digit year",overlayButton:l.overlayButton||"Submit",disableYearOverlay:!!l.disableYearOverlay,disableMobile:!!l.disableMobile,isMobile:"ontouchstart"in window,alwaysShow:!!l.alwaysShow,id:l.id,showAllDates:!!l.showAllDates,respectDisabledReadOnly:!!l.respectDisabledReadOnly};l.sibling&&(y.sibling=l.sibling,y.sibling.first=!0,l.sibling.sibling=y),u&&m(n,y);var q=getComputedStyle(f).position;return h||q&&"static"!==q||(y.inlinePosition=!0,f.style.setProperty("position","relative")),y.inlinePosition&&r.forEach(function(e){e.parent===y.parent&&(e.inlinePosition=!0)}),r.push(y),f.appendChild(v),y.alwaysShow&&g(y),y}(e,t),u=n.startDate,h=n.dateSelected;return d(u||h,n),n}},function(e,t,n){}])});(function(){function aa(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function ba(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:aa(a)}}var ca="undefined"!=typeof window&&window===this?this:"undefined"!=typeof K&&null!=K?K:this,ea="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};
function ha(a,b){if(b){var c=ca;a=a.split(".");for(var d=0;d<a.length-1;d++){var h=a[d];h in c||(c[h]={});c=c[h]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&ea(c,a,{configurable:!0,writable:!0,value:b})}}
ha("Promise",function(a){function b(m){this.f=0;this.j=void 0;this.c=[];var g=this.h();try{m(g.resolve,g.reject)}catch(k){g.reject(k)}}function c(){this.b=null}function d(m){return m instanceof b?m:new b(function(g){g(m)})}if(a)return a;c.prototype.l=function(m){if(null==this.b){this.b=[];var g=this;this.m(function(){g.F()})}this.b.push(m)};var h=ca.setTimeout;c.prototype.m=function(m){h(m,0)};c.prototype.F=function(){for(;this.b&&this.b.length;){var m=this.b;this.b=[];for(var g=0;g<m.length;++g){var k=
m[g];m[g]=null;try{k()}catch(e){this.C(e)}}}this.b=null};c.prototype.C=function(m){this.m(function(){throw m;})};b.prototype.h=function(){function m(e){return function(f){k||(k=!0,e.call(g,f))}}var g=this,k=!1;return{resolve:m(this.M),reject:m(this.i)}};b.prototype.M=function(m){if(m===this)this.i(new TypeError("A Promise cannot resolve to itself"));else if(m instanceof b)this.O(m);else{a:switch(typeof m){case "object":var g=null!=m;break a;case "function":g=!0;break a;default:g=!1}g?this.L(m):this.o(m)}};
b.prototype.L=function(m){var g=void 0;try{g=m.then}catch(k){this.i(k);return}"function"==typeof g?this.P(g,m):this.o(m)};b.prototype.i=function(m){this.s(2,m)};b.prototype.o=function(m){this.s(1,m)};b.prototype.s=function(m,g){if(0!=this.f)throw Error("Cannot settle("+m+", "+g+"): Promise already settled in state"+this.f);this.f=m;this.j=g;this.G()};b.prototype.G=function(){if(null!=this.c){for(var m=0;m<this.c.length;++m)l.l(this.c[m]);this.c=null}};var l=new c;b.prototype.O=function(m){var g=this.h();
m.g(g.resolve,g.reject)};b.prototype.P=function(m,g){var k=this.h();try{m.call(g,k.resolve,k.reject)}catch(e){k.reject(e)}};b.prototype.then=function(m,g){function k(q,p){return"function"==typeof q?function(r){try{e(q(r))}catch(v){f(v)}}:p}var e,f,n=new b(function(q,p){e=q;f=p});this.g(k(m,e),k(g,f));return n};b.prototype.catch=function(m){return this.then(void 0,m)};b.prototype.g=function(m,g){function k(){switch(e.f){case 1:m(e.j);break;case 2:g(e.j);break;default:throw Error("Unexpected state: "+
e.f);}}var e=this;null==this.c?l.l(k):this.c.push(k)};b.resolve=d;b.reject=function(m){return new b(function(g,k){k(m)})};b.race=function(m){return new b(function(g,k){for(var e=ba(m),f=e.next();!f.done;f=e.next())d(f.value).g(g,k)})};b.all=function(m){var g=ba(m),k=g.next();return k.done?d([]):new b(function(e,f){function n(r){return function(v){q[r]=v;p--;0==p&&e(q)}}var q=[],p=0;do q.push(void 0),p++,d(k.value).g(n(q.length-1),f),k=g.next();while(!k.done)})};return b});var K=window,L={};
function ia(a){function b(){setTimeout(function(){c=!1;a()},0);c=!0}var c=!1;this.trigger=function(){c||b()}}
var ja={cacheRefreshIconHover:"reload-orange",cacheRefreshIcon:"reload-red",cacheRemoveIconHover:"cross-2-orange",cacheRemoveIcon:"cross-2-red",editIcon:"edit-white",editIconHover:"edit",messageIcon:"message",messageIconHover:"message-green",addIcon:"add-red",addIconHover:"add-green",deleteIcon:"dustbin-white",deleteIconHover:"dustbin-black-lid-up",deleteCategoryIcon:"dustbin-black",deleteCategoryIconHover:"dustbin-red-lid-up",locationPickerMapMarkerIcon:"map-marker",locationPickerMapMarkerIconHover:"map-marker-hover",
locationEditCloseIcon:"cross-2-white",locationEditCloseIconHover:"cross-2-red",videoViewerCloseIcon:"cross-2-white",videoViewerCloseIconHover:"cross-2-red",mainMenuHamburger:"hamburger",mainMenuHamburgerHover:"hamburger-gray",editProfileSaveIcon:"floppy",editProfileSaveIconHover:"floppy-orange",tagsEditorTagRemoveIcon:"cross-2-white",tagsEditorTagRemoveIconHover:"cross-2-gray",sexualLikesDislikesCheckboxLikeUntickedIcon:"tick-gray",sexualLikesDislikesCheckboxLikeUntickedIconHover:"tick-gray",sexualLikesDislikesCheckboxLikeTickedIcon:"tick-black",
sexualLikesDislikesCheckboxLikeTickedIconHover:"tick-black",sexualLikesDislikesCheckboxDislikeUntickedIcon:"cross-gray",sexualLikesDislikesCheckboxDislikeUntickedIconHover:"cross-gray",sexualLikesDislikesCheckboxDislikeTickedIcon:"cross-black",sexualLikesDislikesCheckboxDislikeTickedIconHover:"cross-black",multiSelectDropDownArrowIcon:"arrow-head-down-black",multiSelectDropDownArrowIconHover:"arrow-head-down-gray",uploadIcon:"upload-blue",uploadIconHover:"upload-red",imageUploaderAcceptIcon:"tick-2-green",
imageUploaderAcceptIconHover:"tick-2-orange",imageUploaderRejectIcon:"cross-2-red",imageUploaderRejectIconHover:"cross-2-orange",authenticateTickboxUntickedIcon:"tickbox-unticked",authenticateTickboxUntickedIconHover:"tickbox-unticked-hover",authenticateTickboxTickedIcon:"tickbox-ticked",authenticateTickboxTickedIconHover:"tickbox-ticked-hover",searchTickboxUntickedIcon:"tickbox-unticked",searchTickboxUntickedIconHover:"tickbox-unticked-hover",searchTickboxTickedIcon:"tickbox-ticked",searchTickboxTickedIconHover:"tickbox-ticked-hover",
memberPreviewAvatarMale:"avatar-male",memberPreviewAvatarFemale:"avatar-female",multimediaEntryEditCloseIcon:"cross-2-white",multimediaEntryEditCloseIconHover:"cross-2-red",multimediaEntryEditTickboxUntickedIcon:"tickbox-unticked",multimediaEntryEditTickboxUntickedIconHover:"tickbox-unticked-hover",multimediaEntryEditTickboxTickedIcon:"tickbox-ticked",multimediaEntryEditTickboxTickedIconHover:"tickbox-ticked-hover",multimediaCategoryAddCloseIcon:"cross-2-white",multimediaCategoryAddCloseIconHover:"cross-2-red"};
function ka(){if("undefined"!=typeof document.documentElement&&"undefined"!=typeof document.documentElement.clientWidth&&0!=document.documentElement.clientWidth)return[document.documentElement.clientWidth,document.documentElement.clientHeight];if("undefined"!=typeof window.innerWidth)return[window.innerWidth,window.innerHeight];var a=document.getElementsByTagName("body")[0];return[a.clientWidth,a.clientHeight]}
function la(a){a=a.getBoundingClientRect();var b=document.documentElement;return{top:a.top+window.pageYOffset-b.clientTop,left:a.left+window.pageXOffset-b.clientLeft,right:a.right+window.pageYOffset-b.clientTop,bottom:a.bottom+window.pageXOffset-b.clientLeft}}function ma(){var a=[];O(arguments,function(b){b&&a.push(b)});return 1==a.length?a[0]:function(){var b=arguments;O(a,function(c){c.apply(null,b)})}}
var pa=K.isWithinViewport=function(a,b,c){c||(c=la(a));if(c.left<window.pageXOffset||c.top<window.pageYOffset)return!1;b||(b=ka());return na(a,b,c)||oa(a,b,c)?!1:!0},na=K.isOverflowingViewportRight=function(a,b,c){b||(b=ka());c||(c=la(a));return c.left+a.offsetWidth>window.pageXOffset+b[0]},oa=K.isOverflowingViewportBottom=function(a,b,c){b||(b=ka());c||(c=la(a));return c.top+a.offsetHeight>window.pageYOffset+b[1]},qa=window.HashBuilder=function(){var a=1;return function(b){if(b.getHash)return b.getHash();
var c=String(a++);b.getHash=function(d){return function(){return d}}(c);return c}}();function ra(a){return a.substr(0,1).toUpperCase()+a.substr(1,a.length-1)}
var ua=new function(){this.from=function(a){return sa.isDate(a)?ta(String(a.getDate()),2)+"/"+ta(String(a.getMonth()+1),2)+"/"+ta(String(a.getFullYear()),4):""}},va=new function(){this.from=function(a){return sa.isDate(a)?ta(String(a.getHours()),2)+":"+ta(String(a.getMinutes()),2)+":"+ta(String(a.getSeconds()),2):""}},wa=new function(){this.from=function(a){return ua.from(a)+" "+va.from(a)}};
function xa(a){switch(a){case "string":return function(b){return String(b)};case "number":return function(b){return Number(b)};case "int":return function(b){return parseInt(b)};case "float":return function(b){return parseFloat(b)};case "boolean":return function(b){return!!b};case "booleanOrNull":return function(b){return sa.isNullOrEmpty(b)?null:"string"!==typeof b||"false"!=b.toLowerCase()&&"0"!=b?!0:!1};default:return function(b){return b}}}
K.UniqueId=new function(){var a=0;this.next=function(){return"_"+String(a++)}};
var O=window.each=function(a,b){for(var c=0;c<a.length;c++)b(a[c])},ya=window.LoopBreak=function(){var a=!1;this.trigger=function(){if(a)return!0;a=!0;setTimeout(function(){a=!1},0);return!1}},U=K.EventEnabledBuilder=function(a){a.addEventListener=function(b,c){void 0==this.a&&(this.a={});var d=this.a;void 0==d[b]&&(d[b]=[]);-1==d[b].indexOf(c)&&d[b].push(c)};a.hasEventListener=function(b,c){if(void 0==this.a)return!1;var d=this.a;return void 0!==d[b]&&-1!==d[b].indexOf(c)?!0:!1};a.removeEventListener=
function(b,c){void 0!=this.a&&(b=this.a[b],void 0!==b&&(c=b.indexOf(c),-1!==c&&b.splice(c,1)))};a.dispatchEvent=function(b){if(void 0!=this.a){var c=this.a[b.type];if(void 0!==c){b.target=this;var d=[],h,l=c.length;for(h=0;h<l;h++)d[h]=c[h];for(h=0;h<l;h++)d[h].call(this,b)}}}},za=K.Timer=function(a){function b(){0<=m&&(g++,g>=m&&d.stop());l()}function c(){e=!1;k&&(clearInterval(k),k=null)}var d=this,h=a.delay,l=a.callback,m=a.nTicks,g=0,k,e=!1;void 0==m&&(m=-1);void 0==h&&(h=1E3);this.stop=c;this.reset=
function(f){g=0;f?e&&(clearInterval(k),k=setInterval(b,h)):c()};this.start=function(){e||(e=!0,k=setInterval(b,h))};this.setDelay=function(f){d.reset();h=f;e=!0;k=setInterval(b,h)};this.isRunning=function(){return e}},Aa=K.TemporalCallback=function(a){function b(){m.stop();g.stop();k=0;c()}var c=a.callback,d=a.maxNTriggers,h=a.maxTotalDelay;a=a.delay;d||h||(h=3*a);var l={};l.callback=b;l.delay=a;l.nTicks=1;var m=new za(l);l={};l.callback=b;l.delay=h;l.nTicks=1;var g=new za(l),k=0;this.trigger=function(){k++;
m.isRunning()?d&&k>d?b():m.reset():(m.start(),g.start())}},W=function(){function a(b,c,d){this.moveNext=b;this.current=c;this.reset=d}a.fromArray=function(b){return new function(c){var d=-1,h=c.length;return new a(function(){d++;return d<h},function(){return c[d]},function(){d=-1})}(b)};"undefined"!=typeof window&&(window.Enumerable=a);return a}(),Ba=new function(){var a=[];this.add=function(b){0<=a.indexOf(b)||a.push(b)};console.log("Leave");window.onbeforeunload=function(){O(a,function(b){b()})}};
W.prototype.toList=function(){this.reset();for(var a=[];this.moveNext();)a.push(this.current());return a};W.prototype.toObj=function(a,b){this.reset();this.reset();for(var c={};this.moveNext();){var d=this.current();c[a(d)]=b(d)}return c};W.prototype.groupBy=function(a){for(var b={};this.moveNext();){var c=this.current(),d=a(c),h=b[d];h||(h=[],b[d]=h);h.push(c)}a=[];for(var l in b)a.push(b[l]);return W.fromArray(a)};
W.prototype.select=function(a){var b=this;return new W(this.moveNext,function(){return a(b.current())},this.reset)};W.prototype.take=function(a){return function(b,c){var d=0;return new W(function(){return c.moveNext()&&(d++,d<=b)?!0:!1},c.current,c.reset)}(a,this)};W.prototype.leave=function(a){var b=this,c=0;return new W(function(){return b.moveNext()&&(c++,c>a)?!0:!1},b.current,b.reset)};
W.prototype.where=function(a){var b=this;return new W(function(){do if(!b.moveNext())return!1;while(!a(b.current()));return!0},this.current,this.reset)};W.prototype.orderBy=function(a,b){return Ca(this,a,void 0!=b?b:function(c,d){return c<d?-1:c>d?1:0})};W.prototype.orderByDesc=function(a,b){return Ca(this,a,void 0!==b?function(c,d){return-b(c,d)}:function(c,d){return c<d?1:c>d?-1:0})};
function Ca(a,b,c){a.reset();for(var d=[];a.moveNext();)d.push(a.current());d=d.sort(function(h,l){h=b(h);l=b(l);return c(h,l)});return W.fromArray(d)}W.prototype.first=function(){if(!this.moveNext())throw Error("No first item");return this.current()};W.prototype.firstOrDefault=function(){this.moveNext();return this.current()};W.prototype.reverse=function(){this.reset();return W.fromArray(this.toList().reverse())};
W.prototype.sum=function(a){this.reset();for(var b=0;this.oa();)b+=a(this.current());return b};W.prototype.count=function(){this.reset();for(var a=0;this.moveNext();)a++;return a};W.prototype.each=function(a){for(this.reset();this.moveNext();)a(this.current())};Array.prototype.select=function(a){return W.fromArray(this).select(a)};Array.prototype.toObj=function(a,b){return W.fromArray(this).toObj(a,b)};Array.prototype.where=function(a){return W.fromArray(this).where(a)};Array.prototype.groupBy=function(a){return W.fromArray(this).groupBy(a)};
Array.prototype.orderBy=function(a,b){return W.fromArray(this).orderBy(a,b)};Array.prototype.orderByDesc=function(a,b){return W.fromArray(this).orderByDesc(a,b)};Array.prototype.each=function(a){return W.fromArray(this).each(a)};Array.prototype.take=function(a){return W.fromArray(this).take(a)};Array.prototype.leave=function(a){return W.fromArray(this).leave(a)};Array.prototype.sum=function(a){return W.fromArray(this).sum(a)};
var Da=new function(){U(this);var a=this;window.addEventListener("resize",function(){a.dispatchEvent({type:"resized"})})},Ea=K.ResizeManager=new function(){function a(b){function c(){w&&w()}function d(){B=e.getBoundingClientRect()}function h(){p.trigger();m()}function l(){m();g()}function m(){v?r.reset(!0):(n&&n(),r.start(),v=!0)}function g(){if(B){var A=B;d();if(A.height!=B.height||A.width!=B.width)k.dispatchEvent({type:"resized"}),f&&f()}else d()}U(this);var k=this,e=b.element,f=b.onResized,n=b.onFirstResize;
b=b.staggered;var q={};q.callback=g;q.delay=500;q.maxTotalDelay=800;var p=b?new Aa(q):void 0;q={nTicks:1,delay:900,callback:function(){v=!1}};var r=new za(q),v=!1,B;this.manual=function(){l()};var z=window.ResizeObserver?!0:!1,y=b?h:l;if(z){var u=new window.ResizeObserver(c);u.observe(e)}else Da.addEventListener("resized",y);this.dispose=function(){z?u.disconnect():Da.removeEventListener("resized",y)};var w;setTimeout(function(){w=y},0)}U(this);this.add=function(b){return new a(b)}};
K.When={NOW:"now",SECONDS:"seconds",MINUTES:"minutes",NEVER:"never"};
var Ga=new function(){function a(b,c,d){var h=b.length-1;if("&"!=b[h]){var l=b.indexOf("?");0>l?b+="?":l!=h&&(b+="&")}b+=c;void 0!==d&&null!==d&&(b=b+"="+d);return b}this.addParameters=function(b,c){if(!c)return b;for(var d in c)b=a(b,d,c[d]);return b};this.addParameter=a;this.setSlashes=function(b,c,d){c?"/"!=b[0]&&(b="/"+b):"/"==b[0]&&(b=b.substr(1,b.length-1));d?"/"!=b[b.length-1]&&(b+="/"):"/"==b[b.length-1]&&(b=b.substr(0,b.length-1));return b};this.getWebsocketUrl=function(b,c){var d=window.location;
c=c?c:d.host;if("https:"===d.protocol){d="wss:";var h=":443"}else d="ws:",h=":80";return d+("//"+c+h)+("/"+b)};this.getLongpollUrl=function(b,c){var d=window.location;return d.protocol+"//"+(c?c:d.host)+"/"+b}};
window.Ajax=function(){function a(d){d=d||{};var h=d.url;this.post=function(l){l.url=l.url?l.url:h;return a.post(l)};this.get=function(l){l.url=l.url?l.url:h;return a.get(l)}}function b(d,h){var l=d.parameters,m=d.callbackSuccessful,g=d.callbackFailed,k=d.callbackTimeout,e=d.contentType?d.contentType:"application/json",f=d.timeout,n=new XMLHttpRequest;n.open(h?"POST":"GET",d.url,!0);f&&(n.timeout=f);n.setRequestHeader("Content-Type",e);if(l){e=!0;for(var q in l)e&&(e=!1)}return new c(n,h?d.data:void 0,
m,g,k)}function c(d,h,l,m,g){function k(){setTimeout(function(){e.onDone&&e.onDone(e)},0)}var e=this,f,n=[],q=new ia(function(){m&&m(n)});d.onload=function(){if(4===d.readyState){if(200===d.status)f=!0,l&&l(d.responseText);else{f=!1;var p="Request failed.  Returned status of "+d.status;n.push(Error(p));console.error(p);q.trigger()}k()}};g&&(d.ontimeout=g);d.onprogress=function(p){e.onProgress&&e.onProgress(p.total?p.loaded/p.total:1)};d.send(h);d.onerror=function(p){console.error(p);n.push(p);q.trigger()};
this.getXhr=function(){return d};this.abort=d.abort;this.getSuccessful=function(){return f}}a.post=function(d){return b(d,!0)};a.get=function(d){return b(d,!1)};return a}();function ta(a,b){for(;a.length<b;)a="0"+a;return a}var Ha=window.Settings=function(a){this.get=function(b){try{var c=window.localStorage.getItem(a+"_"+b);return null==c||void 0==c?void 0:JSON.parse(c)}catch(d){}};this.set=function(b,c){try{window.localStorage.setItem(a+"_"+b,JSON.stringify(c))}catch(d){console.error(d)}}};
function X(){return Ia("div")}
function Ja(){var a=Ka("text");(function(b){var c;b.addEventListener("keydown",function(d){"37"==d.keyCode?(d=b.selectionStart-1,b.selectionStart=d,b.selectionEnd=d):"39"==d.keyCode&&(d=b.selectionStart+1,b.selectionStart=d,b.selectionEnd=d)});b.addEventListener("mousedown",function(){setTimeout(function(){c=b.selectionStart},0)});b.addEventListener("mouseup",function(){var d=b.selectionStart;c==d&&(b.select(),setTimeout(function(){b.selectionStart=d;b.selectionEnd=d},0))})})(a);return a}
function La(){return Ka("password")}function Ma(){return Ia("textarea")}function Na(){return Ia("select")}function Ka(a){var b=Ia("input");b.type=a;return b}function Ia(a){a=document.createElement(a);a.addEventListener||(a.addEventListener=a.attachEvent);return a}
var Iterator=K.Iterator=function(a){var b=0,c=a.length;this.next=function(){var d=a[b];b++;return d};this.hasNext=function(){return b<c};this.remove=function(){a.splice(b-1,1);b--;c--}},Oa=function(){function a(h){function l(e){console.error(e);e=e.msg;var f=e.ticket;if(f){var n=k[f];n&&(n.callback(e),delete k[f],m()||g())}}function m(){for(var e in k)if(k.hasOwnProperty(e))return!0;return!1}function g(){delete c[h.getHash()];h.removeEventListener("message",l)}var k={};h.addEventListener("message",
l);this.addTicketedCallback=function(e,f,n,q){var p={};p.timeSent=(new Date).getTime();p.callback=e;p.customTimeout=n;p.callbackTimeout=q;k[f]=p};this.doTimeouts=function(e){for(var f in k){var n=k[f],q=n.customTimeout;if(n.timeSent<(q?e-q:e-12E4)){if(n=n.callbackTimeout)try{n()}catch(p){console.error(p)}delete k[f]}}m()||g()}}var b=0,c={};(new za({callback:function(){var h=(new Date).getTime(),l;for(l in c)c[l].doTimeouts(h)},delay:1E4,nTicks:-1})).start();var d=function(h,l){this.send=function(m,
g,k){d.send(h,m,g,l,k)}};d.send=function(h,l,m,g,k){if(!m)throw Error("No callback");var e=qa(h),f=c[e];f||(f=new a(h),c[e]=f);e="ticket_"+String((new Date).getTime())+"_"+String(b++);f.addTicketedCallback(m,e,g,k);l.ticket=e;h.send(l)};return d}(),Y=window.BindingsHandlerBuilder=function(){function a(h){function l(g){g=g.bindings.getName();m[g]&&delete m[g]}var m={};this.changed=function(g,k){(g=m[g])&&g.changed(k)};h.bind=function(g,k){this.bindings||(this.bindings=new b);var e=this.bindings;var f=
m[g];if(!f)return k=new d(g,k),e.add(k),f=new c(g,k),f.addEventListener("dispose",l),m[g]=f,e;if(f.containsCallbackSet(k))return!1;k=new d(g,k);e.add(k);f.add(k);return e};h.unbind=function(g,k){(g=m[g])&&(k=g.getByCallbackSet(k))&&k.dispose()};this.dispose=function(){for(var g in m)m[g].dispose();m={}}}function b(h,l){function m(){f||(f=!0,O(n.slice(),function(q){q.dispose()}),e.dispatchEvent({type:"dispose",ea:e}))}function g(q){k(q.binding)}function k(q){q=n.indexOf(q);0>q||(n.splice(q,1),0<n.length||
m())}U(this);var e=this,f=!1,n=[];this.add=function(q){q.addEventListener("dispose",g);n.push(q)};this.getList=function(){return n};this.dispose=m;this.remove=k;l&&e.add(l)}function c(h,l){function m(k){for(var e=g.getList(),f=0,n;n=e[f];f++)if(n.getCallbackSet()==k)return n}var g=new b(h,l);this.containsCallbackSet=function(k){return m(k)?!0:!1};this.getByCallbackSet=m;this.changed=function(k){O(g.getList(),function(e){e.callCallbackSet(k)})};this.add=g.add;this.getList=g.getList;this.dispose=g.dispose;
this.addEventListener=g.addEventListener;this.removeEventListener=g.removeEventListener}function d(h,l){U(this);var m=this,g=!1;this.getCallbackSet=function(){return l};this.callCallbackSet=function(k){l(k)};this.dispose=function(){if(!g){g=!0;var k={type:"dispose"};k.binding=m;m.dispatchEvent(k)}}}return function(h){if(h.bindingsHandler)return h.bindingsHandler;h.bindingsHandler=new a(h);return h.bindingsHandler}}(),Pa=window.MyPropertyBindingsBuilder=function(){function a(){var b=[],c=!1;this._add=
function(d){0<=b.indexOf(b)||b.push(d)};this._remove=function(d){d=b.indexOf(d);0>d||b.splice(d,1)};this.dispose=function(){c||(c=!0,O(b,function(d){d._unbind()}),b=[])}}return function(b){if(b.myBindings)return b.myBindings;b.myBindings=new a(b);return b.myBindings}}(),Qa=window.PropertyHelper=new function(){this.getGetterName=function(a){return"get"+ra(a)};this.getSetterName=function(a){return"set"+ra(a)};this.hasGetter=function(a,b){return a["get"+ra(b)]?!0:!1};this.propertyValuesToObj=function(a,
b,c){a||(a={});O(c,function(d){var h="get"+ra(d),l=b[h];if(void 0==l)throw Error("Model of type "+b.constructor.name+" has no method "+h);a[d]=l()});return a}},Z=window.PropertyBinding=function(){function a(e,f,n,q){function p(){f.unbind(n,q)}var r=this,v=!1,B=g(n),z="set"+B,y="get"+B;if(!f)throw Error("No model provided");f.bind(n,q);var u=Pa(e);u._add(this);this.set=function(w){var A=f[z];if(!A)throw Error("model of type "+f.constructor.name+" does not contain a setter method with name "+z);if("function"!==
typeof A)throw Error(f.constructor.name+"."+z+" is not a function");A(w)};this.get=function(){var w=f[y];if(!w)throw Error("model of type "+f.constructor.name+" does not contain a getter method with name "+y);if("function"!==typeof w)throw Error(f.constructor.name+"."+y+" is not a function");return w()};this.getName=function(){return n};this._unbind=p;this.dispose=function(){v||(v=!0,u._remove(r),p())}}function b(e,f,n,q,p,r,v){return c(e,f,n,q,p,r,v,function(B){return qa(B)})}function c(e,f,n,q,
p,r,v,B){function z(A){for(var x=[],E=0;E<A.length;E++){var C=A[E],G=B(C);x.push(G);var H=y[G];H?u.splice(E,0,u.splice(u.indexOf(H),1)[0]):(H=q(C),y[G]=H,u.splice(E,0,H))}for(G in y)0>x.indexOf(G)&&(H=y[G],delete y[G],u.splice(u.indexOf(H),1),p&&p(H));r&&r(u)}var y={},u=[];e=d(e,f,n,z,!0);var w=e.get();if(!w)throw Error(n+" had no get method on object of type "+f.constructor.name);v||z(w);return new l(e,new m(function(){return u},function(){throw Error("Cannot set a converted array. Not currently supported. Try setting the array being converted.");
}))}function d(e,f,n,q,p){e=new a(e,f,n,q);p||q(e.get());return e}function h(e,f,n,q,p,r,v){var B=Y(e),z=g(n),y="set"+z,u="get"+z;if(v){var w=g(v);z="set"+w;w="get"+w}else z=y,w=u,v=n;if(void 0===f[u])throw Error(u+" is not defined on model type "+f.constructor.name);var A=B.changed;p?(B=q?function(x){x=p.from(x);A(v,x);q(x)}:function(x){A(v,p.from(x))},e[w]=function(){return p.from(f[u]())},w=function(x){f[y](p.to(x))}):(B=q?function(x){A(v,x);q(x)}:function(x){A(v,x)},e[w]=function(){return f[u]()},
w=function(x){f[y](x)});r&&(w=function(x){return function(E){x(E);r(E)}}(w));e[z]=w;return new a(e,f,n,B)}function l(e,f){this.getSource=function(){return e};this.getCarriedOver=function(){return f}}function m(e,f){this.get=e;this.set=f}function g(e){return e.substr(0,1).toUpperCase()+e.substr(1,e.length-1)}var k={};k.standard=d;k.carryOver=function(e,f,n,q,p,r,v){if(void 0==f&&void 0==n){var B=e[L.U];f=e.model;(n=e.name)?(q=e[L.ba])||(q=n):n=e.names;r=e[L.X];p=e[L.R];v=e[L.Y]}else B=e;if("string"===
typeof n)return new h(B,f,n,r,p,v,q);var z=[];O(n,function(y){z.push(new h(B,f,y,void 0,p))});return z};k.carryOverChildModelAsChildViewModel=function(e,f,n,q,p,r){function v(E){E?E!=x&&(x=E,A=y(E),B(A)):x&&(B(null),x=null)}function B(E){w.changed(z,E);u&&u(E)}if("string"===typeof q){var z=q;var y=p;var u=r}else z=n,y=q,u=p;var w=Y(e),A,x;q="get"+g(z);e[q]=function(){return A};e=new a(e,f,n,v);v(e.get());return e};k.carryOverChildViewModelAsChildView=function(e,f,n,q,p){function r(A){if(A)A!=y&&(x=
z,v(),y=A,A=z=q(A),B.changed(n,A),p&&p(A,x));else if(y){var x=z;v();B.changed(n,null);p&&p(null,x);y=null}}function v(){z&&(z.dispose(),z=null)}var B=Y(e),z,y,u="get"+g(n),w=f[u];if(!w)throw Error("Model of type "+f.constructor.name+" does not contain a get method for property named "+n);r(w());e[u]=function(){return z};return new a(e,f,n,r)};k.arrayConversion=b;k.arrayConversionFromPrimitives=function(e,f,n,q,p,r,v){return c(e,f,n,q,p,r,v,function(B){return String(B)})};k.carryOverModelArrayAsViewModelArray=
function(e,f,n,q,p,r){if("string"===typeof q){var v=q;q=p;var B=r}else v=n,B=p;var z=Y(e);p="get"+g(v);var y;e[p]=function(){return y.getCarriedOver().get()};return y=b(e,f,n,q,function(u){u.dispose()},function(u){z.changed(v,u);B&&B(u)})};return k}(),Ra=[{test:{x:0,y:0,width:86,height:86},test2:{x:88,y:0,width:86,height:86},tick:{x:102,y:122,width:32,height:32},cross:{x:50,y:88,width:32,height:32},unsure:{x:84,y:88,width:32,height:32},"tickbox-ticked":{x:136,y:136,width:22,height:22},"tickbox-ticked-hover":{x:152,
y:112,width:22,height:22},"tickbox-unticked":{x:0,y:172,width:22,height:22},"tickbox-unticked-hover":{x:152,y:88,width:22,height:22},hamburger:{x:0,y:88,width:48,height:48},"reload-red":{x:68,y:122,width:32,height:32},"reload-orange":{x:0,y:138,width:32,height:32},"cross-2-red":{x:118,y:88,width:32,height:32},"cross-2-orange":{x:34,y:138,width:32,height:32}}],Sa=window.ControlsCollection=function(){for(var a=!1,b=[],c=0;c<arguments.length;c++){var d=arguments[c];d&&b.push(d)}this.add=function(h){b.push(h)};
this.dispose=function(){a||(a=!0,O(b,function(h){h.dispose()}))}},Ta=window.Panel=function(a){var b=a.className;a=a.classNames;var c=X();c.classList.add("panel");b&&c.classList.add(b);a&&O(a,function(d){c.classList.add(d)});this.getElement=function(){return c}},Va=window.TextBox=function(a){function b(u){void 0!=u&&null!=u&&(z.value=u)}function c(u){k!=u&&(k=u,(z.readOnly=u)?z.classList.add("readonly"):z.classList.remove("readonly"),z.disabled=B||k?!0:!1)}function d(u){B!=u&&(B=u,z.disabled=B||k?
!0:!1)}U(this);var h=a.className,l=a.classNames,m=a.placeholder,g=a.isTextArea,k=a.readOnly,e=a.validate,f=a.propertyName,n=a.model,q=a.autoHeight,p=a.propertyNameDisabled,r=a.propertyNameReadOnly,v,B,z=(a.isPassword?La:g?Ma:Ja)();if(g&&void 0==q||q)a=function(){z.style.height="auto";z.style.height=z.scrollHeight+"px"},z.setAttribute("style","height:"+z.scrollHeight+"px;overflow-y:hidden;"),z.addEventListener("input",a),b=ma(b,a),setTimeout(a,0);k&&c(!0);h&&z.classList.add(h);l&&O(l,function(u){z.classList.add(u)});
m&&(z.placeholder=m);z.classList.add("text-box");this.getElement=function(){return z};this.getValidityIndicator=function(){return v};z.addEventListener("keyup",function(){y.set(z.value)});e&&(v=new Ua(this,n,f,z));var y=Z.standard(this,n,f,b);r&&Z.standard(this,n,r,c);p&&Z.standard(this,n,p,d);this.addEventListener=function(u,w){switch(u){case "keydown":case "keyup":case "click":z.addEventListener(u,w)}};this.focus=function(){z.focus()};this.dispose=function(){self.myBindings&&self.myBindings.dispose()}},
sa=window.Validation=new function(){function a(h){return b(h)?parseFloat(h)==parseInt(h):!1}function b(h){return c(h)?!1:!isNaN(h)}function c(h){return void 0===h||null===h||""===h}var d=/^[0-9]{1,2}\/[0-9]{1,2}\/[0-9]{4}$/;this.isNullOrEmpty=c;this.isNumber=b;this.isInt=a;this.isIntOrEmpty=function(h){return c(h)?!0:a(h)};this.isDate=function(h){return c(h)?!1:!isNaN((new Date(h)).getTime())};this.isDateUK=function(h){if(c(h))return!1;var l=d.test(h);return l=l&&Wa(h)};this.isDateUKOrEmpty=function(h){if(c(h))return!0;
var l=d.test(h);return l=l&&Wa(h)};this.isBoolean=function(h){return"boolean"===typeof h}},Ua=window.ValidityIndicator=function(){function a(c,d,h,l){return 3<arguments.length?new b(c,d,h,l,"invalid-border"):new b(c,d,h,"invalid-border")}var b=function(c,d,h,l,m){function g(n){n?e.classList.remove(f):e.classList.add(f)}if(void 0===h||null===h)throw Error("Arguments not valid");if("string"==typeof h){var k=h;var e=l;var f=m}else k=h.getPropertyNameValue(),e=h.getElement(),f=l;if(!f)return new a(c,
d,h,l);h=k+"Valid";if(!d[Qa.getGetterName(h)])throw Error("Model of type "+d.constructor.name+" does not contain a validator for property "+k);c=Z.standard(c,d,h,g);g(c.get())};b.border=a;b.background=function(c,d,h,l){return 3<arguments.length?new b(c,d,h,l,"invalid-background"):new b(c,d,h,"invalid-background")};return b}();function Xa(){var a=X();a.classList.add("prevent-interraction");document.documentElement.appendChild(a);this.getElement=function(){return a}}
var Ya=window.Spinner=function(a){function b(n){e.style.display=n?"inline-block":"none";n&&h&&setTimeout(function(){document.activeElement&&document.activeElement.blur&&document.activeElement.blur()},0)}function c(n){e.addEventListener(n,function(q){q||(q=window.event);q.stopPropagation&&q.stopPropagation();q.preventDefault&&q.preventDefault();return!1})}var d=this,h=a.preventInterraction,l=a.propertyNameVisible,m=a.nested,g=a.version,k=X();k.classList.add("spinner");k.classList.add(m?"nested":"page");
g||(g="default-white");k.classList.add(g);if("small-black"==g)for(m=0;8>m;m++)g=X(),g.classList.add("f_circleG"),g.id="frotateG_0"+String(m+1),k.appendChild(g);else for(m=0;3>m;m++)k.appendChild(X());if(h){var e=(new Xa).getElement();e.appendChild(k)}else e=k;e.style.display="none";var f;l&&(f=Z.standard(this,a.model,l,b));this.getElement=function(){return e};this.setVisible=function(n){f?f.set(n):b(n)};this.dispose=function(){d.myBindings&&d.myBindings.dispose()};h&&(c("click"),c("mousedown"),c("mouseup"))},
$a=window.Tickbox=function(a){function b(){B||(G=!0,m())}function c(){B||(G=!1,m())}function d(J){C=J;h();var D={};k.dispatchEvent((D.type="changed",D.ticked=J,D));p&&(J={},J.tickbox=k,J.ticked=C,p(J))}function h(){C?E.classList.contains("ticked")||E.classList.add("ticked"):E.classList.contains("ticked")&&E.classList.remove("ticked");m()}function l(){if(C){if(G)return w?w:u;if(y)return y}else if(G&&u)return u;return v}function m(){x.setSemantic(l())}function g(J){(B=J)?(A.classList.add("readonly"),
A.classList.remove("not-readonly")):(A.classList.remove("readonly"),A.classList.add("not-readonly"))}U(this);var k=this,e=a.className,f=a.classNames,n=a.model,q=a.propertyName,p=a.changed,r=a.t,v=a.imageSemantic,B=a.readOnly,z=a.propertyNameReadOnly;if(v){var y=a.imageSemanticTicked;var u=a.imageSemanticHover;var w=a.imageSemanticTickedHover}var A=X();A.classList.add("tickbox");e&&A.classList.add(e);f&&O(f,function(J){A.classList.add(J)});a={classNames:["box"]};(a.semantic=v)&&(a.hoverOverridden=
!0);var x=new Za(a),E=x.getElement();r&&(a=X(),a.classList.add("text"),A.appendChild(a),a.innerHTML=r);A.appendChild(E);var C,G=!1,H;q&&(H=Z.standard(this,n,q,d));var N;B?g(!0):z&&(N=Z.standard(this,n,z,g));this.getElement=function(){return A};this.getBoxElement=function(){return E};this.getTicked=function(){return C};this.dispose=function(){k.myBindings&&k.myBindings.dispose()};this.setReadOnly=function(J){N?N.set(J):g(J)};this.set=function(J){H?H.set(J):(C=J,h())};A.addEventListener("click",function(){B||
(H?H.set(!H.get()):d(!C))});v&&(A.addEventListener("mouseenter",b),A.addEventListener("mouseleave",c))};
window.Switch=function(a){function b(r){q.innerHTML=r}function c(r){p.innerHTML=r}function d(r){r?(q&&q.classList.remove("active"),p&&p.classList.add("active")):(q&&q.classList.add("active"),p&&p.classList.remove("active"))}var h=new $a(a),l=a.propertyNameTextLeft,m=a.propertyNameTextRight,g=a.propertyNameReadOnly,k=a.textLeft,e=a.textRight;a=a.model;var f=X(),n=h.getElement();h.addEventListener("changed",function(r){d(r.ticked)});if(l||k){var q=X();q.classList.add("text-left");f.appendChild(q);l?
Z.standard(this,a,l,b):b(k)}f.appendChild(n);if(m||e){var p=X();p.classList.add("text-right");f.appendChild(p);m?Z.standard(this,a,m,c):c(e)}f.classList.add("switch");this.getElement=function(){return f};d(h.getTicked());Z.standard(this,a,g,function(r){r?f.classList.add("readonly"):f.classList.remove("readonly")})};
var ab=new function(){function a(d){d=c.indexOf(d);0>d||c.splice(d,1)}function b(d,h,l){var m=this,g=[];this.addAdditionalElement=function(k){0>g.indexOf(k)&&g.push(k)};this.removeAdditionalElement=function(k){k=g.indexOf(k);0>k||g.splice(k,1)};this.getElements=function(){return[d].concat(g)};this.getElement=function(){return d};this.hide=function(){l(m);h()};this.dispose=l}var c=[];this.register=function(d,h){var l=new b(d,h,a);setTimeout(function(){a:{var m=0;for(var g;g=c[m];m++)if(g.getElement()==
d){m=!0;break a}m=!1}m||c.push(l)},0);return l};this.remove=function(d){for(var h=new Iterator(c);h.hasNext();){var l=h.next();if(l.getElement()==d){l.dispose();break}}};document.addEventListener("mousedown",function(d){var h=d.pageX;d=d.pageY;for(var l=c.slice(),m=0,g;g=l[m];m++){for(var k=g.getElements(),e=!1,f=0,n;n=k[f];f++){var q=la(n),p=q.left,r=p+n.offsetWidth;q=q.top;n=q+n.offsetHeight;if(!(h<p||h>r||d<q||d>n)){e=!0;break}}e||g.hide()}})},bb=new function(){return function(a){function b(x){(x?
c:g)()}function c(){if(!y){w&&B&&B.dispose();B=ab.register(r,h);k(!0);y=!0;var x={};f.dispatchEvent((x.type="show",x.popup=f,x))}}function d(x){A?A.set(x):b(x)}function h(){d(!1)}function l(x){m(x.popup)}function m(x){B.removeAdditionalElement(x.getElement());x=z.indexOf(x);0>x||z.splice(x,1)}function g(){if(y){y=!1;w&&B.dispose();k(!1);O(z.slice(),m);var x={};f.dispatchEvent((x.type="hide",x.popup=f,x))}}function k(x){x?r.classList.add("visible"):r.classList.remove("visible")}function e(x){return"string"===
typeof x?x:String(x)+"px"}a=a||{};U(this);var f=this,n=a.className,q=a.classNames,p=a.propertyNameVisible,r=a.element,v=a.model,B,z=[];r||(r=X());var y=!1,u=!1;n&&r.classList.add(n);q&&O(q,function(x){r.classList.add(x)});var w=void 0==a.closeOnClickOff?!0:a.closeOnClickOff;r.classList.add("popup");var A;p&&(A=Z.standard(this,v,p,b));this.show=function(){d(!0)};this.hide=h;this.setPosition=function(x){x.left&&(r.style.left=e(x.left));x.top&&(r.style.top=e(x.top));x.right&&(r.style.right=e(x.right));
x.bottom&&(r.style.bottom=e(x.bottom))};this.dispose=function(){u||(u=!0,w&&B.dispose(),r.parentNode.removeChild(r))};this.addChildPopup=function(x){if(!y)throw Error("Cant add child while popup is not showing. Children should be added when made visible only");B&&(x.addEventListener("hide",l),B.addAdditionalElement(x.getElement()),z.push(x))};this.isWithinViewport=function(x){return pa(r,x)};this.getElement=function(){return r}}};
function cb(a){function b(t){C.disabled=t?!0:!1}function c(t){t?C.classList.add("visible"):C.classList.remove("visible")}function d(t){C.innerHTML=t}function h(t){t?C.classList.remove(q):C.classList.add(q)}function l(){var t=Za.getSpritesheetImageNameFromElementCss(C);t&&m(t)}function m(t,F,P){var S={};S.name=t;S.semantic=F;if(P){S.semanticHover=P;S.hoverOverridden=!0;var I=g(S);C.addEventListener("mouseenter",function(){I.setHovering(!0)});C.addEventListener("mouseleave",function(){I.setHovering(!1)})}else g(S)}
function g(t){G=new Za(t);C.appendChild(G.getElement());return G}U(this);var k=this,e=a.preventPropagation,f=a.className,n=a.classNames,q=a.classNameToggled,p=a.model,r=a.toggle,v=a.imageName,B=a.imageSemantic,z=a.imageSemanticHover,y=a.propertyNameDisabled,u=a.propertyNameText,w=a.propertyNameVisible,A=a.t,x=a.click,E=a.methodNameClick,C=Ia("button");f&&C.classList.add(f);n&&O(n,function(t){C.classList.add(t)});C.classList.add("button");var G;v||B?m(v,B,z):setTimeout(l,0);y&&Z.standard(this,p,y,
b);w&&Z.standard(this,p,w,c);u&&Z.standard(this,p,u,d);A&&d(A);C.addEventListener("click",function(t){t=t||window.event;e&&t.stopPropagation();t.preventDefault();E&&p[E]();x&&x(t);k.dispatchEvent({type:"click"});if(r){t=!N();J(t);var F={type:"toggled"};F.toggled=t;k.dispatchEvent(F)}});if(r)if(f=a[L.w]){var H=Z.standard(this,p,f,h);var N=function(){return H.get()};var J=function(t){H.set(t)}}else{var D=a.toggled?!0:!1;N=function(){return D};J=function(t){D=t;h(t)};J(D)}var M=this.addEventListener;
this.addEventListener=function(t,F){switch(t){case "mouseenter":C.addEventListener("mouseenter",F);break;case "mouseleave":C.addEventListener("mouseleave",F);break;default:M(t,F)}};var R=this.removeEventListener;this.removeEventListener=function(t,F){switch(t){case "mouseenter":C.removeEventListener("mouseenter",F);break;case "mouseleave":C.removeEventListener("mouseleave",F);break;default:R(t,F)}};this.getElement=function(){return C};this.setDissabled=function(t){b(t)};this.dispose=function(){G&&
G.dispose();k.myBindings&&k.myBindings.dispose()}}
window.Dialog=function(){function a(b){function c(){z?h():R?R.set(!1):d(!1)}function d(t){t?C.show():C.hide()}function h(){H||(H=!0,C.dispose(),f.myBindings&&f.myBindings.dispose(),O(M,function(t){t.dispose()}))}function l(t){if(!H){var F=[];O(t,function(S){var I=qa(S);F.push(I);var T=D[I];T||(T=e(S),D[I]=T,M.push(T),N.appendChild(T.getElement()))});for(var P in D)0<=F.indexOf(P)||k(P)}}function m(t){d(t)}function g(t){J.innerHTML=t}function k(t){var F=D[t];delete D[t];M.splice(M.indexOf(F),1);N.removeChild(F.getElement())}
function e(t){var F={};if("string"==typeof t)F.click=function(){E&&E(t);c()},F.t=t;else{var P=F.model=t.model;F.propertyNameDisabled=t.propertyNameDisabled;var S=t.methodNameClick;if(S&&!P)throw Error("Method name click was supplied but no model");var I=t.click;F.t=t.t;var T=t.classNames;T||(T=[]);T.push("dialog-button");F.classNames=T;F.className=t.className;var V=t.callback;F.click=function(){V&&V(t);S&&P[S]();I&&I();E&&E(t);c()}}return new cb(F)}var f=this,n=b.propertyNameVisible,q=b.propertyNameMessage,
p=b.propertyNameOptions,r=b.propertyNameTitle,v=b.preventInterraction,B=b.options,z=b.disposeOnHide,y=b.message,u=b.title,w=b.model,A=b.className,x=b.classNames,E=b.callback,C=new bb({fa:!1}),G=C.getElement();v&&(new Xa,b=G,G=X(),b.appendChild(G));var H=!1;A&&G.classList.add(A);x&&O(x,function(t){G.classList.add(t)});var N=X(),J=X();if(u||r)r=X(),r.classList.add("title"),N.appendChild(r),u&&(r.innerHTML=u);G.classList.add("dialog");N.classList.add("inner");J.classList.add("message");g(y);document.body.appendChild(C.getElement());
G.appendChild(N);N.appendChild(J);var D={},M=[],R;p&&Z.standard(this,w,p,l);n&&(R=Z.standard(this,w,n,m));if(q)Z.standard(this,w,q,g);else if(B)l(B);else throw Error("No options provided");this.show=function(){if(H)return setTimeout(function(){console.log(Error("Cannot show after disposal"))},0),f;d(!0);return f};this.dispose=h}a.show=function(b){b.disposeOnHide=!0;b=new a(b);b.show();return b};return a}();
function db(a){function b(I){for(;0<M.options.length;)M.removeChild(M.options[0]);t={};var T=!1;I||console.error(F+" has no get method on object of type"+C.constructor.name);O(I,function(V){var Q=r?V[r]:x?V[x]():V;if(y&&V==H||u&&Q==N)T=!0;var fa=p?V[p]:A?V[A]():V,Fa=Ia("option");Fa.text=fa;Fa.value=Q;M.appendChild(Fa);t[Q]=V});T&&(y?h(H):l(N))}function c(I){H=I;h(I)}function d(I){l(I)}function h(I){I?(I=r?I[r]:x?I[x]():I,l(I)):l()}function l(I){I=String(I);for(var T=0;T<M.options.length;T++){var V=
M.options[T];if(V.value==I){M.selectedIndex=T;R.innerHTML=V.text;return}}1>M.options.length||(M.selectedIndex=0,M.options[0]&&(R.innerHTML=M.options[0].text),J.trigger()||m(M.options[0]))}function m(I){y?(H=t[I.value],P.set(H)):(N=E?E(I.value):I.value,S.set(N))}function g(I){q!=I&&(I?(D.removeChild(M),D.appendChild(R)):(D.appendChild(M),D.removeChild(R),k(I)))}function k(I){I?D.classList.add("readonly"):D.classList.remove("readonly")}var e=this;U(this);var f=a.className,n=a.classNames,q=a.readOnly,
p=a.itemTextName,r=a.itemValueName,v=a.propertyNameItemText,B=a.propertyNameItemValue,z=a.propertyNameItems,y=a.propertyNameSelectedItem,u=a.propertyNameSelectedValue;q=a.readOnly;var w=a.propertyNameReadOnly,A;v&&(A=Qa.getGetterName(v));var x;B&&(x=Qa.getGetterName(B));v=a.converterType;var E=a.valueConverter,C=a.model;B=a.validate;if(!C)throw Error("No model provided. propertyNameItems is "+z);var G,H,N,J=new ya,D=X(),M=Na(),R=X();R.classList.add("readonly");var t={};q&&(M.readOnly=!0);f&&D.classList.add(f);
n&&O(n,function(I){D.classList.add(I)});D.classList.add("select");this.getElement=function(){return D};this.getValidityIndicator=function(){return G};M.addEventListener("change",function(){var I=M.options[M.selectedIndex];I&&m(I)});this.addEventListener=function(I,T){switch(I){case "change":M.addEventListener(I,T)}};this.focus=function(){M.focus()};this.dispose=function(){e.myBindings&&e.myBindings.dispose()};B&&(G=new Ua(this,C,y?y:u,D));w&&(f=Z.standard(this,C,w,g,!0),q=f.get());q?D.appendChild(R):
D.appendChild(M);k(q);var F=Z.standard(this,C,z,function(I){b(I)},!0);f=F.get();if(!f)throw Error("Items is: "+f+" for propertyNameItems "+z+(C?" on model of type "+C.constructor.name:""));b(f);if(y){var P=Z.standard(this,a.model,y,c,!0);h(P.get())}else if(u){var S=Z.standard(this,a.model,u,d,!0);l(S.get());E||(v||(v=typeof N),E=xa(v))}}
var eb=window.TextBlock=function(a){function b(f){e.innerHTML=void 0!=f&&null!=f?String(f):""}var c=this,d=a.className,h=a.classNames,l=a.propertyName,m=a.methodNameClick,g=a.model,k=a.t;if(!g&&!k)throw Error("No model provided");var e=X();e.classList.add("text-block");d&&e.classList.add(d);h&&O(h,function(f){e.classList.add(f)});m&&e.addEventListener("click",function(){g[m]()});l?Z.standard(this,g,l,b):b(a.t);this.getElement=function(){return e};this.dispose=function(){c.myBindings&&c.myBindings.dispose()}};
window.NumberRange=function(a){var b=a.t,c=a.classNames,d=a.className,h=a.propertyNameFrom,l=a.propertyNameTo;b=a.t;var m=a.fromText,g=a.toText;a=a.model;var k=X();d&&k.classList.add(d);c&&O(c,function(r){k.classList.add(r)});k.classList.add("number-range");c=X();c.classList.add("to");d=X();d.classList.add("from");var e={};if(b){e.t=b;e.className="title";var f=new eb(e);e={};k.appendChild(f.getElement())}e.t=m;b=new eb(e);e={};e.t=g;g=new eb(e);e={};e.propertyName=h;e.model=a;var n=new Va(e);e={};
e.propertyName=l;e.model=a;var q=new Va(e),p=new Sa(f,b,n,g,q);k.appendChild(d);k.appendChild(c);d.appendChild(b.getElement());d.appendChild(n.getElement());c.appendChild(g.getElement());c.appendChild(q.getElement());this.getElement=function(){return k};this.getComponents=function(){var r={};r.fromTextBox=n;r.toTextBox=q;return r};this.getToTextBox=function(){return k};this.dispose=function(){p.dispose()}};
var fb=new function(){return function(a){function b(p){n=p;p=[];for(var r=0,v;v=n[r];r++){var B=String(q(v));p.push(B);if(B=f[B]){v=r;var z=e.indexOf(B);z!=v&&(e.splice(z,1),e.splice(v,0,B),B=B.getElement(),h.removeChild(B),(v=e[v+1])?(v=v.getElement(),h.insertBefore(B,v)):h.appendChild(B))}else{var y=v;B=r;z=g(y);v=z.getElement();y=q(y);f[y]=z;(y=e[B])?(e.splice(B,0,z),B=y.getElement(),h.insertBefore(v,B)):(e.push(z),h.appendChild(z.getElement()))}}v=[];for(r in f)0>p.indexOf(r)&&v.push(r);c(v);
d.dispatchEvent({type:"changed"})}function c(p){O(p,function(r){var v=f[r];v&&(v.dispose(),e.splice(e.indexOf(v),1),delete f[r],r=v.getElement(),h.removeChild(r))})}U(this);var d=this,h=a.element,l=a.model;if(!l)throw Error("No model provided");var m=a.propertyNameItems,g=a.createView,k=a.convertItem;if(!g)throw Error("createView not provided");var e=[],f={},n;this.hasItems=function(){return 0<e.length};var q=(a=a.itemsArePrimitives)?function(p){return p}:function(p){return qa(p)};(k?(a?Z.arrayConversionFromPrimitives:
Z.arrayConversion)(this,l,m,k,void 0,b).getCarriedOver():Z.standard(this,l,m,b)).get()&&(this.getViewFromItemId=function(p){return f[String(p)]},this.getViews=function(){return e},this.getItemIds=function(){var p=[],r;for(r in f)p.push(r);return p},this.getItems=function(){return n},this.dispose=function(){d.myBindings&&d.myBindings.dispose()})}};
window.Tags=function(){var a=[];(function(){a=[];O([[48,57],[65,90],[95,122],[32,32]],function(b){var c=b[1];for(b=b[0];b<=c;b++)a.push(String.fromCharCode(b))})})();return function(b){function c(){if(!N){var t={};N=new cb((t.className="button-add",t.t="Add",t.click=g,t));C.add(N)}return N}function d(){H||(H=Ja(),H.classList.add("text-add"),H.maxLength=B,z&&(H.placeholder=z),C.add(H),H.addEventListener("keydown",function(t){t=t||window.event;var F=t.which;if(13===F||188==F||!J&&32==F)g(),t.preventDefault()}));
return H}function h(t){J=t}function l(t){t!=x&&(t?(G.removeChild(d()),G.removeChild(c().getElement())):(G.appendChild(d()),G.appendChild(c().getElement())),x=t,M&&M.getViews().each(function(F){F.setReadOnly(t)}))}function m(t){t?E.classList.add("visible"):E.classList.remove("visible")}function g(){var t=e(H.value);for(H.value="";" "==t[t.length-1];)t=t.substr(0,t.length-1);for(;" "==t[0];)t=t.substr(1,t.length-1);t=t.toLowerCase();if(!(0>=t.length)){g(t);var F=R.get();if(!F.ua(function(S){return S[y]==
t}).ka()){var P={};F.push((P[y]=t,P));R.set(F.sort())}}}function k(t){var F=R.get();R.set(F.where(function(P){return P!==t}).orderBy(function(P){return P.t}).toList().sort())}function e(t){var F="";O(t,function(P){0<=a.indexOf(P)&&(F+=P)});return F}function f(t,F,P){function S(){if(!V){var Q={};V=new cb((Q.click=I,Q.className="remove",Q.imageSemantic="tagsEditorTagRemoveIcon",Q.imageSemanticHover="tagsEditorTagRemoveIconHover",Q))}return V}function I(){F(t)}var T=X();T.classList.add("tag");var V;
T.appendChild(document.createTextNode(t[y]));P||T.appendChild(S().getElement());this.getElement=function(){return T};this.dispose=function(){V&&V.dispose()};this.setReadOnly=function(Q){if(Q!=P){P=Q;var fa=S();Q?T.removeChild(fa.getElement()):T.appendChild(fa.getElement())}}}var n=this,q=b.model,p=b.className,r=b.classNames,v=b.propertyName,B=b.characterLimit,z=b.placeholder,y=b.itemTextName,u=b.itemValueName;y||(y="t");u||(u="v");u=b.propertyNameReadOnly;var w=b.propertyNameAllowSpace,A=b.propertyNameVisible,
x=b.readOnly,E=X();E.classList.add("tags-editor");var C=new Sa,G=X();G.classList.add("add-wrapper");var H,N,J=!1;b=X();b.classList.add("menu");b.appendChild(G);E.appendChild(b);p&&E.classList.add(p);r&&O(r,function(t){E.classList.add(t)});var D;u&&(D=Z.standard(this,q,u,l,!0));D&&D.get()&&(x=!0);x||(G.appendChild(d()),G.appendChild(c().getElement()));A&&Z.standard(this,q,A,m);w&&Z.standard(this,q,w,h);p={};var M=new fb((p.element=E,p.model=q,p.propertyNameItems=v,p.createView=function(t){return new f(t,
k,x)},p.itemsArePrimitives=!1,p));C.add(M);this.getElement=function(){return E};this.dispose=function(){C.dispose;n.myBindings&&n.myBindings.dispose()};var R=Z.standard(this,q,v,function(){})}}();
var gb=window.ImagePreloader=new function(){function a(g){g=g.preloader;var k=g.I();delete l[k];m[k]=g.H();h[k]=!0}function b(g){var k=new d({url:g});l[g]=k;k.addEventListener("done",a);return k}function c(g){function k(n){n=f.indexOf(n.preloader);0>n||f.splice(n,1);1>f.length&&e&&e()}var e=g.callback,f=[];this.B=function(n){n.addEventListener("done",k);f.push(n)}}function d(g){function k(){e.dispatchEvent({type:"done",preloader:e})}U(this);var e=this,f=g.url,n=Ia("img");n.onload=function(){k()};
n.onerror=function(q){console.error(q);k()};n.src=f;this.I=function(){return f};this.H=function(){return n}}var h={},l={},m={};this.preloadRange=function(g,k){var e;O(g,function(f){if(!h[f]){var n=l[f];e||(e=new c({callback:k}));e.B(n?n:b(f))}});e||k&&k()};this.getImgFromUrl=function(g){return m[g]}};
window.EfficientMovingCycle=function(){function a(){}function b(){k&&(e.removeEventListener("touchend",k),k=void 0)}function c(){g&&(e.removeEventListener("touchmove",g),g=void 0)}function d(){m&&(e.removeEventListener("mouseup",m),m=void 0)}function h(){l&&(e.removeEventListener("mousemove",l),l=void 0)}var l,m,g,k,e=document.documentElement;return function(f){var n=this,q=f.element,p=f.stopPropagation;this.onEnd=this.onMove=this.onStart=a;if(window.isMobile){var r=function(u){u||(u=window.event);
n.onEnd(u,!0)||(b(),c())},v=function(u){u||(u=window.event);n.onMove(u,!0);u.preventDefault&&u.preventDefault()};q.addEventListener("touchstart",function(u){u||(u=window.event);0!=n.onStart(u,!0)&&(c(),b(),e.addEventListener("touchmove",v),g=v,e.addEventListener("touchend",r),k=r)})}else{var B=function(u){p&&(u.stopPropagation&&u.stopPropagation(),u.preventDefault&&u.preventDefault())},z=function(u){u||(u=window.event);n.onEnd(u,!1);d();h();B(u)},y=function(u){u||(u=window.event);n.onMove(u,!1);B(u)};
q.addEventListener("mousedown",function(u){u||(u=window.event);0!=n.onStart(u,!1)&&(h(),d(),e.addEventListener("mousemove",y),l=y,e.addEventListener("mouseup",z),m=z,B(u))})}}}();
var Za=window.ImageControl=function(){function a(k){function e(Q){Q?I.classList.add("visible"):I.classList.remove("visible")}function f(Q){q().src=Q}function n(Q){throw Error("Semantic "+Q+" did not map to anything. Check the SemanticsMap in the strings folder");}function q(){V||(V=Ia("img"),V.style.border="0",V.style.position="relative",I.appendChild(V));return V}function p(){v(!0)}function r(){v(!1)}function v(Q){T=Q;u()}function B(Q){M&&(Q=Q||window.event,Q.stopPropagation());if(D)P[D]();A.dispatchEvent({type:"click"})}
function z(){setTimeout(function(){x=d(I);if(!x)throw Error("No --spritesheet-image-name supplied in stylesheet");y()},0)}function y(){m?w():0<=g.indexOf(A)||(A.create=w,g.push(A))}function u(){S?z():t||R||y()}function w(){var Q=T?G:x;if(!Q)throw Error('Image name "'+Q+'" is not contained in the spritesheet');Q=b()[Q];var fa=q();fa.style.width=Q.width;fa.style.height=Q.height;fa.style.left=Q.left;fa.style.top=Q.top;fa.src=Q.image.src}U(this);var A=this,x=k.name,E=k.semantic,C=k.hoverOverridden,G=
k.nameHover,H=k.semanticHover,N=k.className,J=k.classNames,D=k.functionNameClick,M=k.preventPropagation,R=k.src,t=k.propertyNameSrc,F=k.propertyNameVisible,P=k.model;E&&!x&&((x=ja[E])||n(E),H&&((G=ja[H])||n(H)));var S=x||E||R||t?!1:!0,I=X();D&&I.addEventListener("click",B);var T=!1,V;J&&O(J,function(Q){I.classList.add(Q)});N&&I.classList.add(N);I.classList.add("image");I.style.overflow="hidden";C?this.setHovering=v:(I.addEventListener("mouseenter",p),I.addEventListener("mouseleave",r));F&&Z.standard(this,
P,F,e);this.setName=function(Q){x=Q;u()};this.setSemantic=function(Q){x=ja[Q];u()};this.update=u;this.getElement=function(){return I};this[L.T]=function(){return V};this.dispose=function(){};t?(I.appendChild(q()),Z.standard(this,P,t,f)):R?(I.appendChild(q()),f(R)):S?z():y()}function b(){if(!h){h={};var k=0;O(Ra,function(e){for(var f in e){var n=e[f];n.image=l[k];var q=n.image,p=n.width/q.width,r=n.height/q.height;h[f]={width:String(100/p)+"%",height:String(100/r)+"%",left:String(-(100*n.x/q.width/
p))+"%",top:String(-(100*n.y/q.height/r))+"%",image:n.image}}k++})}return h}function c(){O(g,function(k){k.create()})}function d(k){return getComputedStyle(k).getPropertyValue("--spritesheet-image-name")}var h,l=[],m=!1;(function(){var k=window.spritesheetUrls;gb.preloadRange(k,function(){O(k,function(e){l.push(gb.getImgFromUrl(e))});m=!0;c()})})();var g=[];a.getSpritesheetImageNameFromElementCss=d;return a}(),hb=window.Label=function(a){function b(g){g?m.classList.add("visible"):m.classList.remove("visible")}
var c=a.t,d=a.classNames,h=a.className,l=a.propertyNameVisible;a=a.model;var m=X();h&&m.classList.add(h);d&&O(d,function(g){m.classList.add(g)});m.classList.add("label");m.innerHTML=c;l?Z.standard(this,a,l,b):b(!0);this.getElement=function(){return m}};function ib(){var a=new Date;return new Date(a.setMonth(a.getMonth()+-300))}
function Wa(a){if("string"!==typeof a)return null;var b=a.split("/");if(3>b.length||3<b.length)return null;a=parseInt(b[2]);var c=parseInt(b[1]);b=parseInt(b[0]);if(isNaN(a)||isNaN(c)||isNaN(b)||1>c||12<c)return null;a=new Date(a,c-1,1);if(isNaN(a.getTime())||1>b||(new Date(a.getFullYear(),a.getMonth()+1,0)).getDate()<b)return null;a.setDate(b);return a}
var jb=window.DatePicker=function(){function a(c,d){var h=document.createElement("option");h.value=c;h.innerHTML=d;return h}function b(c,d){for(;c.length<d;)c="0"+c;return c}return function(c){function d(){var A=y.options[y.selectedIndex].value,x=u.options[u.selectedIndex].value,E=w.options[w.selectedIndex].value;p.set(A&&x&&E?new Date(parseInt(E),parseInt(x),parseInt(A),0,0,0,0):void 0)}var h=c.classNames,l=c.popup,m=c.propertyNameDate,g=c.maxDate,k=c.minDate,e=c.dateSelected,f=c.currentMonth,n=
c.currentYear,q=c.model;c=c.placeholder;var p,r=l?Ja():X();r.classList.add(l?"date-picker-popup":"date-picker-embedded");e||f||n||(e=ib());h&&O(h,function(A){r.classList.add(A)});if(l){var v=new bb({});h=v.getElement();h.classList.add("popup-date-picker");document.documentElement.appendChild(h);c&&(r.placeholder=c);r.addEventListener("click",function(){v.show();var A=la(r),x={};x.left=A.left;x.top=A.top+r.offsetHeight;v.setPosition(x)});var B=X();h.appendChild(B);var z={pa:function(A){A=A.D;A=b(String(A.getDate()),
2)+"/"+b(String(A.getMonth()+1),2)+"/"+A.getFullYear();r.value=A;v.hide()},ta:1,ia:"S M T W Th F S".split(" "),ja:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),qa:"Go!",ra:"Enter a 4-digit year",ca:!0,D:e,ma:g,na:k,sa:e,ga:f,ha:n};setTimeout(function(){window.datepicker(B,z)})}else{var y=Na(),u=Na(),w=Na();r.classList.add("date-picker");r.appendChild(y);r.appendChild(u);r.appendChild(w);y.classList.add("not-right");u.classList.add("not-right");e=1900+(new Date).getYear();f="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");
y.appendChild(a("","Day"));u.appendChild(a("","Month"));w.appendChild(a("","Year"));y.addEventListener("change",d);u.addEventListener("change",d);w.addEventListener("change",d);for(g=1;32>g;g++)k=a(g,String(g)),y.appendChild(k);for(g=1;12>g;g++)k=a(g,f[g]),u.appendChild(k);e-=17;for(g=e-1;g>e-100;g--)k=a(g,String(g)),w.appendChild(k)}m&&(p=Z.standard(this,q,m,function(){}));this.getElement=function(){return r};this.dispose=function(){p&&p.unbind()}}}();
cb=function(a){function b(t){C.disabled=t?!0:!1}function c(t){t?C.classList.add("visible"):C.classList.remove("visible")}function d(t){C.innerHTML=t}function h(t){t?C.classList.remove(q):C.classList.add(q)}function l(){var t=Za.getSpritesheetImageNameFromElementCss(C);t&&m(t)}function m(t,F,P){var S={};S.name=t;S.semantic=F;if(P){S.semanticHover=P;S.hoverOverridden=!0;var I=g(S);C.addEventListener("mouseenter",function(){I.setHovering(!0)});C.addEventListener("mouseleave",function(){I.setHovering(!1)})}else g(S)}
function g(t){G=new Za(t);C.appendChild(G.getElement());return G}U(this);var k=this,e=a.preventPropagation,f=a.className,n=a.classNames,q=a.classNameToggled,p=a.model,r=a.toggle,v=a.imageName,B=a.imageSemantic,z=a.imageSemanticHover,y=a.propertyNameDisabled,u=a.propertyNameText,w=a.propertyNameVisible,A=a.t,x=a.click,E=a.methodNameClick,C=Ia("button");f&&C.classList.add(f);n&&O(n,function(t){C.classList.add(t)});C.classList.add("button");var G;v||B?m(v,B,z):setTimeout(l,0);y&&Z.standard(this,p,y,
b);w&&Z.standard(this,p,w,c);u&&Z.standard(this,p,u,d);A&&d(A);C.addEventListener("click",function(t){t=t||window.event;e&&t.stopPropagation();t.preventDefault();E&&p[E]();x&&x(t);k.dispatchEvent({type:"click"});if(r){t=!N();J(t);var F={type:"toggled"};F.toggled=t;k.dispatchEvent(F)}});if(r)if(f=a[L.w]){var H=Z.standard(this,p,f,h);var N=function(){return H.get()};var J=function(t){H.set(t)}}else{var D=a.toggled?!0:!1;N=function(){return D};J=function(t){D=t;h(t)};J(D)}var M=this.addEventListener;
this.addEventListener=function(t,F){switch(t){case "mouseenter":C.addEventListener("mouseenter",F);break;case "mouseleave":C.addEventListener("mouseleave",F);break;default:M(t,F)}};var R=this.removeEventListener;this.removeEventListener=function(t,F){switch(t){case "mouseenter":C.removeEventListener("mouseenter",F);break;case "mouseleave":C.removeEventListener("mouseleave",F);break;default:R(t,F)}};this.getElement=function(){return C};this.setDissabled=function(t){b(t)};this.dispose=function(){G&&
G.dispose();k.myBindings&&k.myBindings.dispose()}};var kb=window.GenderOptions=[{v:0,t:"Man"},{v:1,t:"Woman"},{v:2,t:"Couple(man + woman)"},{v:3,t:"Couple of men"},{v:4,t:"Couple of women"},{v:5,t:"Transexual man"},{v:6,t:"Transexual women"}];function lb(){var a=Na();a.classList.add("gender");for(var b=0;b<kb.length;b++){var c=kb[b],d=Ia("option");d.innerHTML=c.t;d.value=c.v;a.appendChild(d)}this.getV=function(){return a.options[a.selectedIndex].value};this.getElement=function(){return a}}
window.CheckboxArray=function(a){function b(p){p!==f&&(f=p,q.getViews().each(function(r){r.setReadOnly(f)}))}function c(p){function r(w,A){O(z,function(x){x!=w&&x.untick()});y.set(A?w.getV():l)}var v=X();v.classList.add("row");var B={};B.t=p.t;B=new eb(B);var z=[],y=Z.standard(this,h,p.propertyName,function(w){for(var A=0;A<z.length;A++){var x=z[A];if(x.getV()==w){x.tick();break}}},!0),u=y.get();O(e,function(w){w=new d(w,r,w.v==u);z.push(w);v.appendChild(w.getElement())});v.appendChild(B.getElement());
this.getElement=function(){return v};this.dispose=function(){};this.setReadOnly=function(w){O(z,function(A){A.setReadOnly(w)})}}function d(p,r,v){var B=this,z={changed:function(w){r(B,w.ticked)}};z.className=p.className;z.imageSemantic=p.imageSemantic;z.imageSemanticTicked=p.imageSemanticHover;z.imageSemanticHover=p.imageSemanticTicked;z.imageSemanticTickedHover=p.imageSemanticTickedHover;z.readOnly=f;var y=new $a(z),u=y.getElement();this.untick=function(){y.set(!1)};this.tick=function(){y.set(!0)};
this.getElement=function(){return u};this.getV=function(){return p.v};this.setReadOnly=y.setReadOnly;v&&y.set(!0)}var h=a.model,l=a["default"],m=a.propertyNameItems,g=a.propertyNameReadOnly,k=Qa.getGetterName(a.propertyNameColumns),e=h[k]();l=a["default"];var f=!1,n=X();n.classList.add("checkbox-array");a={};a.element=n;a.model=h;a.propertyNameItems=m;a.createView=function(p){return new c(p)};var q=new fb(a);this.getElement=function(){return n};g&&Z.standard(this,h,g,b)};
$a=window.Tickbox=function(a){function b(){B||(G=!0,m())}function c(){B||(G=!1,m())}function d(J){C=J;h();var D={};k.dispatchEvent((D.type="changed",D.ticked=J,D));p&&(J={},J.tickbox=k,J.ticked=C,p(J))}function h(){C?E.classList.contains("ticked")||E.classList.add("ticked"):E.classList.contains("ticked")&&E.classList.remove("ticked");m()}function l(){if(C){if(G)return w?w:u;if(y)return y}else if(G&&u)return u;return v}function m(){x.setSemantic(l())}function g(J){(B=J)?(A.classList.add("readonly"),
A.classList.remove("not-readonly")):(A.classList.remove("readonly"),A.classList.add("not-readonly"))}U(this);var k=this,e=a.className,f=a.classNames,n=a.model,q=a.propertyName,p=a.changed,r=a.t,v=a.imageSemantic,B=a.readOnly,z=a.propertyNameReadOnly;if(v){var y=a.imageSemanticTicked;var u=a.imageSemanticHover;var w=a.imageSemanticTickedHover}var A=X();A.classList.add("tickbox");e&&A.classList.add(e);f&&O(f,function(J){A.classList.add(J)});a={classNames:["box"]};(a.semantic=v)&&(a.hoverOverridden=
!0);var x=new Za(a),E=x.getElement();r&&(a=X(),a.classList.add("text"),A.appendChild(a),a.innerHTML=r);A.appendChild(E);var C,G=!1,H;q&&(H=Z.standard(this,n,q,d));var N;B?g(!0):z&&(N=Z.standard(this,n,z,g));this.getElement=function(){return A};this.getBoxElement=function(){return E};this.getTicked=function(){return C};this.dispose=function(){k.myBindings&&k.myBindings.dispose()};this.setReadOnly=function(J){N?N.set(J):g(J)};this.set=function(J){H?H.set(J):(C=J,h())};A.addEventListener("click",function(){B||
(H?H.set(!H.get()):d(!C))});v&&(A.addEventListener("mouseenter",b),A.addEventListener("mouseleave",c))};
var mb=window.TickCross=function(a){function b(){l.classList.contains("tick")&&l.classList.remove("tick")}function c(){l.classList.contains("cross")&&l.classList.remove("cross")}var d=a.model,h=a.propertyName,l=X();l.classList.add("tickcross");var m=new Za({}),g=m.getElement();if(a.t){var k=X();k.classList.add("text");l.appendChild(k);k.innerHTML=a.t}l.appendChild(g);this.getElement=function(){return l};this.dispose=function(){e&&e.unbind()};var e=Z.standard(this,d,h,function(f){void 0==f?(b(),c(),
m.update()):f?(c(),l.classList.contains("tick")||(l.classList.add("tick"),m.update())):(b(),l.classList.contains("cross")||(l.classList.add("cross"),m.update()))})},nb=window.TabPanel=function(a,b){function c(y,u,w,A){var x=X();w=X();x.style.width=String(q)+"%";x.style.left=String(A*q)+"%";x.classList.add("tab");w.classList.add("name");x.appendChild(w);w.innerHTML=u;x.addEventListener("mousedown",function(){setTimeout(function(){z.set(y)},0)});this.close=function(){};this.setActive=function(){x.style.height=
"18px"};this.N=function(){x.style.height="17px"};this.getElement=function(){return x}}function d(){var y=X();y.style.height=b?"auto":"calc(100% - 3px)";y.style.position=b?"relative":"absolute";y.classList.add("panel");this.show=function(){y.style.display="inline"};this.J=function(){y.style.display="none"};this.close=function(){};this.getElement=function(){return y}}var h=a.tabs,l=a.propertyNameTabName;a=a.model;var m=this,g={},k=[],e=X(),f=X(),n=X();n.classList.add("tabs");e.style.height=b?"auto":
"100%";e.classList.add("tab-panel");var q=100/h.length;f.style.height=b?"auto":"calc(100% - 20px)";f.style.width="100%";b||(f.style.top="20px");f.style.la="left";f.style.position=b?"relative":"absolute";e.appendChild(n);e.appendChild(f);for(var p=0,r;r=h[p];p++){var v=new d,B=r.name;r=new c(B,r.t,v,p);g[B]=v;g[B]=v;k.push(r);f.appendChild(v.getElement());n.appendChild(r.getElement())}var z=Z.standard(this,a,l,function(y){y=g[y];var u=0,w;for(w in g){var A=g[w];A.J();y!=A?k[u++].N():(k[u++].setActive(),
m.K&&m.K(w))}y.show()});this.close=function(){var y=0,u;for(u in g)g[u].close(),k[y++].close()};this.getElement=function(){return e};this.getPanelElement=function(y){return g[y].getElement()};this.dispose=function(){m.myBindings&&m.myBindings.dispose()}},ob=window.MenuItem=function(a){function b(){if(!y)return!1;var D=Qa.getGetterName(p);D=y[D];return D?(D=D())?0<D.length:!1:!1}function c(D){var M={};M.model=D;M.propertyNameItemId=q;M.propertyNameItems=p;M.propertyNameText=r;M.propertyNameEnabled=
v;M.propertyNameVisible=B;M.propertyNameOnClick=z;M.parent=n;M.className=u;M.classNames=w;M.createView=A;M.parentIsPopup=!0;var R;A&&(R=A(M));R||(R=new ob(M));R.addEventListener&&(R.addEventListener("showingpopup",d),R.addEventListener("hidingpopup",h),R.addEventListener("hideentiremenu",f));return R}function d(D){G.addChildPopup(D.popup);n.dispatchEvent(D);k()}function h(){g()}function l(D){var M=la(H.parentNode);return{left:D[0]-(H.offsetWidth+3+M.left),top:x.offsetTop+(x.offsetHeight-3)}}function m(){k();
var D={type:"hidingpopup"};D.popup=G;D.menuItem=n;n.dispatchEvent(D)}function g(){H&&H.classList.add("active-end")}function k(){H&&H.classList.remove("active-end")}function e(D){J=D}function f(D){G&&G.hide();n.dispatchEvent(D)}U(this);var n=this,q=a.propertyNameItemId,p=a.propertyNameItems,r=a.propertyNameText,v=a.propertyNameEnabled,B=a.propertyNameVisible,z=a.propertyNameOnClick,y=a.model,u=a.className,w=a.classNames,A=a.createView,x=Ia("li"),E=Ia("p"),C=a.parentIsPopup;x.appendChild(E);x.classList.add("menu-item");
u&&x.classList.add(u);w&&O(w,function(D){x.classList.add(D)});if(b()){a={};a.className=u;a.classNames=w;a.element=Ia("ul");var G=new bb(a);var H=G.getElement();H.classList.add("menu-item-popup");x.appendChild(H);G.addEventListener("hide",m);a={};a.element=H;a.model=y;a.propertyNameItems=p;a.propertyNameItemId=q;a.createView=c;var N=new fb(a)}Z.standard(this,y,"t",function(D){E.innerHTML=D});if(z){a=Z.standard(this,y,z,e);var J=a.get()}this.getMenuType=function(){return"item"};this.getElement=function(){return x};
this.setVisible=function(D){x.style.display=D?"list-item":"none"};this.dispose=function(){};this.hide=function(){G&&G.hide()};x.addEventListener("click",function(D){D=D||window.event;D.preventDefault();D.stopPropagation();D={type:"activated"};D.menuItem=n;n.dispatchEvent(D);g();D={};D.menuItem=y;J&&J(D);b()?N.hasItems()&&(G.show(),C?(D=ka(),G.setPosition({top:x.offsetTop,left:x.offsetWidth-3}),G.isWithinViewport(D)||(G.setPosition({top:x.offsetTop,left:3-H.offsetWidth}),G.isWithinViewport(D)||(G.setPosition({top:x.offsetTop+
(x.offsetHeight-3),left:3}),na(H,D)&&G.setPosition(l(D))))):(G.setPosition({top:x.offsetHeight,left:x.offsetLeft}),D=ka(),na(H,D)&&G.setPosition({left:D[0]-(H.offsetWidth+1),top:x.offsetHeight})),D={type:"showingpopup"},D.popup=G,D.menuItem=n,n.dispatchEvent(D),g()):(D={type:"hideentiremenu"},D.menuItem=n,n.dispatchEvent(D))})};
window.MenuBar=function(a){function b(t,F){F=F||{};F.model=t;F.propertyNameItemId=q;F.propertyNameItems=p;F.propertyNameText=r;F.propertyNameEnabled=v;F.propertyNameVisible=B;F.propertyNameOnClick=z;F.parent=f;F.createView=y;F.className=u;F.classNames=w;var P;y&&(P=y(F));P||(P=new ob(F));return P}function c(){var t=G.getItemIds(),F=E.offsetHeight/2;A=!1;h(!1);var P,S;O(t,function(I){var T=G.getViewFromItemId(I).getElement();I=D.getViewFromItemId(I);d(T,I,F)&&!A&&(h(!0),P&&d(P,S,F),A=!0);P=T;S=I})}
function d(t,F,P){t=t.offsetTop>P;F.setVisible(t);return t}function h(t){J.getElement().style.display=t?"block":"none";t?E.classList.add("hamburger-showing"):E.classList.remove("hamburger-showing")}function l(t){H.addChildPopup(t.popup);N&&N.classList.remove("active-end")}function m(t){x=t.menuItem}function g(){k()}function k(){N&&N.classList.add("active-end")}function e(){H&&H.hide()}var f=this,n=a.model,q=a.propertyNameItemId,p=a.propertyNameItems,r=a.propertyNameText,v=a.propertyNameEnabled,B=
a.propertyNameVisible,z=a.propertyNameOnClick,y=a.createView,u=a.className,w=a.classNames,A,x,E=Ia("ul");E.classList.add("menu-bar");u&&E.classList.add(u);w&&O(w,function(t){E.classList.add(t)});this.getMenuType=function(){return"bar"};var C={};C.element=E;C.model=n;C.propertyNameItems=p;C.propertyNameItemId=q;C.createView=function(t){t=b(t);t.addEventListener&&(t.addEventListener("activated",m),t.addEventListener("hidingpopup",g));return t};var G=new fb(C);G.addEventListener("changed",function(){setTimeout(c,
0)});C={};C.className=u;C.classNames=w;C.element=Ia("ul");var H=new bb(C);var N=H.getElement();N.classList.add("menu-item-popup");E.appendChild(N);C={className:"menu-item-hamburger",imageSemantic:"mainMenuHamburger",imageSemanticHover:"mainMenuHamburgerHover",click:function(){if(A){H.show();var t=J.getElement();H.setPosition({left:t.offsetLeft+t.offsetWidth-N.offsetWidth,top:t.offsetHeight+t.offsetTop});k()}}};var J=new cb(C);E.appendChild(J.getElement());J;C={};C.element=N;C.model=n;C.propertyNameItems=
p;C.propertyNameItemId=q;C.createView=function(t){C={parentIsPopup:!0};t=b(t,C);t.addEventListener&&(t.addEventListener("showingpopup",l),t.addEventListener("hidingpopup",g),t.addEventListener("hideentiremenu",e));return t};var D=new fb(C);setTimeout(c,0);C={};C.element=E;C.onResized=function(){c()};C.onFirstResize=function(){H.hide();x&&x.hide();x=null};C.staggered=!0;var M=Ea.add(C),R=new Sa(G,D,J);this.getElement=function(){return E};this.dispose=function(){R.dispose();M.dispose()}};
K.StopWatch=function(){var a=this,b=0,c,d=!1;this.getMilliseconds=function(){var h=b;d&&(h+=(new Date).getTime()-c);return h};this.getSeconds=function(){return a.getMilliseconds/1E3};this.start=function(){d||(d=!0,c=(new Date).getTime())};this.stop=function(){d&&(d=!1,b+=(new Date).getTime()-c,c=0)};this.reset=function(){d=!1;c=b=0}};
var pb=K.ChannelType={JSONP:"jsonp",LONGPOLL:"longpoll",WEBSOCKET:"websocket"},qb=window.AuthenticationTypes={Guest:"guest",SignIn:"signIn",Register:"register"},rb=window.Authenticate=function(a){U(this);window.da=this;var b=Y(this).changed;this.getUsername=function(){return a.username};this.setUsername=function(c){a.username=c;b("username",c)};this.getEmail=function(){return a.email};this.setEmail=function(c){a.email=c;b("email",c)};this.getPassword=function(){return a.password};this.setPassword=
function(c){a.password=c;b("password",c)};this.getAuthenticationTypes=function(){return[qb.SignIn,qb.Register]};this.getAuthenticationType=function(){return a.authenticationType?a.authenticationType:qb.SignIn};this.setAuthenticationType=function(c){a.authenticationType=c;b("authenticationType",c)};this.getVisible=function(){return a.visible};this.setVisible=function(c){a.visible=c;b("visible",c)};this.getStaySignedIn=function(){return a.staySignedIn};this.setStaySignedIn=function(c){a.staySignedIn=
c;b("staySignedIn",c)};this.getBirthday=function(){return a.birthday};this.setBirthday=function(c){a.birthday=c;b("birthday",c)};this.setAuthenticated=function(c){a.authenticated=c;b("authenticated",c)};this.getGender=function(){return a.gender};this.setGender=function(c){a.gender=c;b("gender",c)}},sb=window.AutomaticAuthentication=function(a){var b=a.send,c=new Ha("AutomaticAuthentication");this.authenticate=function(){var d=c.get("token");if(!d)return!1;var h={type:"automaticAuthenticate"};h.token=
d;b(h);return!0};this.setToken=function(d){c.set("token",d)};this.clear=function(){c.set("token",null)}},tb=window.AuthenticateViewModel=function(a){function b(w){h(w)}function c(w){h(w)}function d(w){h(w)}function h(w){var A=w.successful,x=w.token;if(A){var E=w.userId,C={type:"authenticated"};C.sessionId=w.sessionId;C.token=x;C.userId=E;n.dispatchEvent(C)}A?(y.set(!1),x&&z.setToken(x)):g(w.error)}function l(){k(!1)}function m(w){h(w)}function g(w){v=w;p("errorVisible",w);p("error",w);w&&k(!1)}function k(w){u=
w;p("working",w)}var e=a.model,f=a.ticketedSend;Y(this);U(this);var n=this,q=new Ha("#Authenticate"),p=n.bindingsHandler.changed,r,v,B=!0,z=new sb({send:function(w){f.send(w,b,l)}});Z.carryOver(this,e,["password","authenticationType","authenticationTypes","staySignedIn","birthday"]);var y=Z.carryOver(this,e,"visible",void 0,void 0,function(w){w||(k(!1),g())}),u;Z.carryOver(this,e,"username",void 0,void 0,function(w){q.set("username",w)});Z.carryOver(this,e,"email",void 0,void 0,function(w){q.set("email",
w)});this[L.$]=function(){e.setAuthenticationType(qb.aa)};this.getPasswordReenter=function(){return r};this.setPasswordReenter=function(w){r=w;p("passwordReenter",w)};this.getHideUponClickOff=function(){return B};this.setHideUponClickOff=function(w){B=w;p("hideUponClickOff",w)};this.getError=function(){return v};this.setError=g;this.getWorking=function(){return u};this.setWorking=k;this.signIn=function(){k(!0);var w={type:"signIn"};w.usernameOrEmail=e.getUsername();w.password=e.getPassword();w.staySignedIn=
e.getStaySignedIn();f.send(w,c,l)};this.guest=function(){k(!0);var w={type:"guest"};w.username=e.getUsername();w.staySignedIn=e.getStaySignedIn();f.send(w,d,l)};this.register=function(){k(!0);if(e.getUsername())if(e.getEmail())if(e.getPassword())if(r)if(r!=e.getPassword())g("The passwords entered do not match!");else if(e.getBirthday()){var w={type:"register"};w.email=e.getEmail();w.username=e.getUsername();w.password=e.getPassword();w.gender=e.getGender();w.birthday=e.getBirthday();w.staySignedIn=
e.getStaySignedIn();f.send(w,m,l)}else g("You must enter a birthday!");else g("You must re-enter your password!");else g("You must enter a password!");else g("You must enter an email address!");else g("You must enter a username!")};this.setAuthenticated=function(w){p("authenticated",w);w&&k(!1)};this.dispose=function(){n.myBindings.dispose()};this.automaticAuthenticate=z.authenticate;n.setUsername(q.get("username"))},ub=window.AuthenticateView=function(a){function b(){J=null;N.set(!1)}function c(D){D=
D||window.event;if(13==D.keyCode)switch(a.getAuthenticationType()){case qb.Guest:a.guest();break;case qb.SignIn:a.signIn();break;default:a.register()}}a.bind("errorVisible",function(D){E.style.display=D?"block":"none"});var d=a.getAuthenticationTypes(),h=0<=d.indexOf(qb.Guest);d=0<=d.indexOf(qb.Register);var l=new Ya({preventInterraction:!0,propertyNameVisible:"working",model:a});document.documentElement.appendChild(l.getElement());var m=X();window.element=m;var g=X();l=X();var k=X(),e=X(),f={},n=
new Va((f.model=a,f.propertyName="username",f.classNames=["form-control","entry"],f.placeholder="Username",f));f={};var q=new Va((f.model=a,f.propertyName="username",f.classNames=["form-control","entry"],f.placeholder="Username",f));f={};var p=new Va((f.model=a,f.propertyName="username",f.classNames=["form-control","entry"],f.placeholder="Username",f));f={};f=new $a((f.t="Stay signed in",f.imageSemantic="authenticateTickboxUntickedIcon",f.imageSemantic="authenticateTickboxUntickedIconHover",f.imageSemanticTicked=
"authenticateTickboxTickedIcon",f.imageSemanticTickedHover="authenticateTickboxTickedIconHover",f.model=a,f.propertyName="staySignedIn",f));var r={};r=new $a((r.t="Stay signed in",r.imageSemantic="authenticateTickboxUntickedIcon",r.imageSemantic="authenticateTickboxUntickedIconHover",r.imageSemanticTicked="authenticateTickboxTickedIcon",r.imageSemanticTickedHover="authenticateTickboxTickedIconHover",r.model=a,r.propertyName="staySignedIn",r));var v={},B=new Va((v.model=a,v.propertyName="password",
v.classNames=["form-control","entry"],v.placeholder="Password",v.isPassword=!0,v));v={};var z=new Va((v.model=a,v.propertyName="password",v.classNames=["form-control","entry"],v.placeholder="Password",v.isPassword=!0,v));v={};var y=new Va((v.model=a,v.propertyName="passwordReenter",v.classNames=["form-control","entry"],v.placeholder="Re-enter Password",v.isPassword=!0,v));v={};var u=new Va((v.model=a,v.propertyName="email",v.classNames=["form-control","entry"],v.placeholder="Email",v));v={};var w=
new $a((v.t="Stay signed in",v.imageSemantic="authenticateTickboxUntickedIcon",v.imageSemantic="authenticateTickboxUntickedIconHover",v.imageSemanticTicked="authenticateTickboxTickedIcon",v.imageSemanticTickedHover="authenticateTickboxTickedIconHover",v.model=a,v.propertyName="staySignedIn",v)),A={classNames:["button-register"],t:"Enter",methodNameClick:"signIn"};A.model=a;v=new cb(A);A={classNames:["button-register"],t:"Enter",methodNameClick:"guest"};A.model=a;var x=new cb(A),E=X(),C={};C=new Va((C.model=
a,C.propertyName="error",C.classNames=["form-control","error-text"],C.placeholder="",C.isTextArea=!0,C.readOnly=!0,C));m.classList.add("authenticate");g.classList.add("div-inner");l.classList.add("div-inputs-sign-in");g={};g=new jb((g.propertyNameDate="birthday",g.model=a,g.classNames=["birthday"],g));var G=new lb;A.classNames=["button-register"];A.t="Done";A.methodNameClick="register";A.model=a;A=new cb(A);p.addEventListener("keydown",c);B.addEventListener("keydown",c);u.addEventListener("keydown",
c);q.addEventListener("keydown",c);z.addEventListener("keydown",c);y.addEventListener("keydown",c);e.appendChild(q.getElement());e.appendChild(z.getElement());e.appendChild(y.getElement());e.appendChild(u.getElement());e.appendChild(G.getElement());e.appendChild(g.getElement());e.appendChild(w.getElement());e.appendChild(A.getElement());l.appendChild(n.getElement());l.appendChild(B.getElement());k.appendChild(p.getElement());e.classList.add("inputs-register");E.classList.add("error");n.addEventListener("keydown",
c);n.addEventListener("click",function(){n.focus()});q={tabs:[{name:qb.SignIn,t:"Sign In"}],model:a,propertyNameTabName:"authenticationType"};h&&q.tabs.splice(0,0,{name:qb.Guest,t:"Guest"});d&&q.tabs.push({name:qb.Register,t:"Register"});p=new nb(q,!0);q=p.getElement();m.appendChild(q);p=p.getPanelElement;h&&p(qb.Guest).appendChild(k);p(qb.SignIn).appendChild(l);d&&(h=p(qb.Register),h.appendChild(e),h.className="panel");q.style.height="auto";q.style.position="relative";k.appendChild(r.getElement());
k.appendChild(x.getElement());l.appendChild(f.getElement());l.appendChild(v.getElement());m.appendChild(E);E.appendChild(C.getElement());document.body.appendChild(m);var H=Z.standard(this,a,"hideUponClickOff",function(D){!D&&J&&(J.dispose(),J=null)}),N=Z.standard(this,a,"visible",function(D){D?(H.get()&&ab.register(m,b),m.style.display="block"):(m.style.display="none",a.setPasswordReenter(""),a.setPassword(""))}),J},vb=window.Deployment=function(a){function b(){return a.versions}var c=Y(this);U(this);
var d=c.changed;this.getVersions=b;this.setVersion=function(h){var l=b();O(l,function(m){m.current=m.version==h});d("versions",l)};this.getStartedAt=function(){return a.startedAt};this.dispose=function(){c.dispose()};this.getParams=function(){return a}},wb=window.DeploymentViewModel=function(a){function b(){var f=h().where(function(n){return n.current}).first();f||(f=h()[0]);if(f)return f.version}function c(){return void 0==e||null==e||e==k}function d(){return h().select(function(f){return f.version}).toList()}
function h(){return a.getVersions()}function l(){g("versionIsSame",c())}var m=this,g=Y(this).changed,k=b(),e=k;Z.standard(this,a,"versions",function(){k=b();l();g("versions",d())});this.setSelectedVersion=function(f){e=f;l()};this.updateVersion=function(){if(!c())m.onSendMessage({type:"set_version",version:e})};this.getVersionIsSame=c;this.getVersions=d;this.getSelectedVersion=function(){return e};this.getStartedAt=a.getStartedAt;this.dispose=function(){a.dispose()}},xb=window.DeploymentView=function(a){var b=
X();b.classList.add("deployment");var c=new Ta({}),d=new Ta({}),h={t:"Version"},l=new hb(h),m=new db({propertyNameItems:"versions",model:a,propertyNameSelectedValue:"selectedVersion"});h={t:"Update Version",methodNameClick:"updateVersion"};h.model=a;h.propertyNameDisabled="versionIsSame";var g=new cb(h),k=c.getElement();k.appendChild(l.getElement());k.appendChild(m.getElement());k.appendChild(g.getElement());var e=d.getElement();h={};h.t=a.getStartedAt();a=new hb(h);e.appendChild(a.getElement());
b.appendChild(k);b.appendChild(e);var f=new Sa(m,l,d,g,c,a);this.getElement=function(){return b};this.dispose=function(){f.dispose()}},yb=window.InterserverCommunication=function(a){var b=Y(this);U(this);var c=!1,d=!1,h=b.changed;this.setTesting=function(l){c=l;h("testing",l)};this.setTestingRouting=function(l){d=l;h("testingRouting",l)};this.getTesting=function(){return c};this.getTestingRouting=function(){return d};this.getTestPassed=function(){return a.testPassed};this.getTestRoutingPassed=function(){return a.testRoutingPassed};
this.setTestPassed=function(l){a.testPassed=l;h("testPassed",l)};this.setTestRoutingPassed=function(l){a.testRoutingPassed=l;h("testRoutingPassed",l)};this.dispose=function(){b.dispose()};this.getParams=function(){return a}},zb=window.InterserverCommunicationViewModel=function(a){var b=this;Y(this);Z.carryOver(this,a,["testing","testingRouting","testPassed","testRoutingPassed"]);this.test=function(){b.onSendMessage({type:"test_interserver_communication"});a.setTesting(!0);a.setTestPassed()};this.testRouting=
function(){b.onSendMessage({type:"test_interserver_communication_routing"});a.setTestingRouting(!0);a.setTestRoutingPassed()};this.dispose=function(){a.dispose()}},Ab=window.InterserverCommunicationView=function(a){var b=X();b.classList.add("interserver-communication");var c=new Ta({}),d=new Ta({}),h=new Ta({});c=c.getElement();d=d.getElement();var l={t:"Interserver Communication",classNames:["label-interserver-communication"]},m=new hb(l),g=new Ya({propertyNameVisible:"testing",nested:!0,model:a}),
k=new mb({classNames:[],propertyName:"testPassed",model:a});l={t:"Test Connection",methodNameClick:"test"};l.model=a;l[L.u]="testing";var e=new cb(l);h=h.getElement();l={t:"Test Routing",methodNameClick:"testRouting"};l.model=a;l[L.u]="testingRouting";l=new cb(l);var f=new Ya({propertyNameVisible:"testingRouting",nested:!0,model:a});a=new mb({classNames:[],propertyName:"testRoutingPassed",model:a});var n=[g,k,e,l,f,a];c.appendChild(m.getElement());d.appendChild(e.getElement());d.appendChild(k.getElement());
d.appendChild(g.getElement());h.appendChild(l.getElement());h.appendChild(a.getElement());h.appendChild(f.getElement());b.appendChild(c);b.appendChild(d);b.appendChild(h);this.getElement=function(){return b};this.dispose=function(){O(n,function(q){q.dispose()})}};function Cache(a){a.items||(a.items=[]);this.getItems=function(){return a.items};this.getParams=function(){return a}}
function Bb(a){Y(this);this.getData=function(){return a.data};this.getAccessed=function(){return a.accessed};this.getUpdated=function(){return a.updated};this.getCacheType=function(){return a.cacheType};this.getId=function(){return a.id}}function Cb(a){var b=Y(this).changed;a.profiles||(a.profiles={});var c;this.getProfiles=function(){return c};this.setProfiles=function(d){c=d;a.profiles=d.getParams();b("profiles",d)}}
function Db(a){a=a.model;var b=X();b.classList.add("cache");var c={},d=new Ya((c.propertyNameVisible="working",c.nested=!0,c.preventInterraction=!0,c.model=a,c));b.appendChild(d.getElement());c={};c=new eb((c.propertyName="title",c.model=a,c.className="title",c));b.appendChild(c.getElement());c={};c=new cb((c.methodNameClick="refresh",c.className="refresh",c.imageSemantic="cacheRefreshIcon",c.imageSemanticHover="cacheRefreshIconHover",c.model=a,c));b.appendChild(c.getElement());c={};c=new cb((c.methodNameClick=
"remove",c.className="remove",c.imageSemantic="cacheRemoveIcon",c.imageSemanticHover="cacheRemoveIconHover",c.model=a,c));b.appendChild(c.getElement());c=X();c.classList.add("items");b.appendChild(c);var h={},l=new fb((h.element=c,h.model=a,h.propertyNameItems="items",h.createView=function(m){var g={};return new Eb((g.model=m,g))},h));this.getElement=function(){return b};this.dispose=function(){l.dispose();d.dispose()}}
function Fb(a){function b(v){r=v;m("working",v)}function c(v){p=v;m("items",v)}function d(){c([]);h().then(c).catch(function(v){console.error(v)})}function h(){return new Promise(function(v,B){function z(u){b(!1);B(u)}b(!0);var y={};e.send((y.type="getCacheItems",y.sessionId=f(),y.hostId=k.getId(),y.cacheName=g,y),function(u){u.successful?(u=u.items.select(function(w){var A={};return new Gb((A.model=new Bb(w),A.getSessionId=f,A.ticketedSend=e,A))}).toList(),b(!1),v(u)):z()},z)})}var l=this,m=Y(this).changed,
g=a.name,k=a.host,e=a.ticketedSend,f=a.getSessionId,n=a.remove,q=k.getIp(),p=[],r=!1;d();this.refresh=d;this.remove=function(){n(l)};this.getWorking=function(){return r};this.getTitle=function(){return g+(q?"  ("+q+")":"")};this.getItems=function(){return p};this.dispose=function(){l[L.W]&&l.myBindings[L.S]()}}
function Eb(a){a=a.model;var b=X();b.classList.add("item");var c={};c=new eb((c.t=a.getId(),c));var d=a.getUpdated(),h={};d=new eb((h.t=!0===d?"u":!1===d?"uu":"nu",h));h=a.getAccessed();var l={};h=new eb((l.t=h?wa.from(new Date(h)):"",l));switch(a.getCacheType()){case "onDisk":b.classList.add("on-disk");break;default:b.classList.add("in-memory")}b.appendChild(c.getElement());b.appendChild(d.getElement());b.appendChild(h.getElement());this.getElement=function(){return b};this.dispose=function(){}}
function Gb(a){Y(this);Z.carryOver(this,a.model,["data","accessed","updated","id","cacheType"])}
function Hb(a){a=a.model;var b=X();b.classList.add("caches");var c={};c=new hb((c.t="Host",c.className="host",c));b.appendChild(c.getElement());c={};c=new db((c.model=a,c.propertyNameItemText="ip",c.propertyNameItemValue="id",c.propertyNameSelectedItem="selectedHost",c.className="host",c.propertyNameItems="hostOptions",c));b.appendChild(c.getElement());c={};c=new hb((c.t="Cache",c.className="cache-name",c));b.appendChild(c.getElement());c={};c=new db((c.model=a,c.itemTextName="name",c.itemValueName=
"name",c.propertyNameSelectedValue=L.A,c.propertyNameItems="cacheOptions",c));b.appendChild(c.getElement());c={};c=new cb((c.t="Add",c.methodNameClick="add",c.model=a,c));b.appendChild(c.getElement());c=X();c.classList.add("entries");b.appendChild(c);var d={};new fb((d.element=c,d.model=a,d.propertyNameItems="entries",d.createView=function(h){var l={};return new Db((l.model=h,l))},d));this.getElement=function(){return b};this.dispose=function(){}}
function Ib(a){function b(r){r=e.indexOf(r);r;e.splice(r,1);e=r=e;l("entries",r)}function c(r){n=r;p=0<r.length?r[0].name:void 0;l("cacheOptions",r)}function d(r){return new Promise(function(v,B){var z={};g.send((z.type="getCaches",z.sessionId=k(),z.hostId=parseInt(r),z),function(y){y.successful?v(y.caches):B()},B)})}function h(r){console.error(r)}var l=Y(this).changed,m=a.model,g=a.ticketedSend,k=a.getSessionId,e=[],f=[],n=[],q,p;(function(){return new Promise(function(r,v){var B={};g.send((B.type=
"getHosts",B.sessionId=k(),B),function(z){z.successful?(z=z.hosts.select(function(y){return new Jb(y)}).toList(),r(z)):v()},v)})})().then(function(r){f=r;l("hostOptions",r)}).catch(h);this.add=function(){var r={};e.push(new Fb((r.name=p,r.host=q,r.ticketedSend=g,r.getSessionId=k,r.remove=b,r)));e=r=e;l("entries",r)};this.getSelectedHost=function(){return q};this.setSelectedHost=function(r){q=r;l("selectedHost",r);c([]);d(q?q.getId():void 0).then(c).catch(h)};this[L.Z]=function(r){p=r;l(L.A,r)};this.getHostOptions=
function(){return f};this.getCacheOptions=function(){return n};this.getEntries=function(){return e};this.dispose=function(){m.dispose()}}function Jb(a){console.log(a);this.getId=function(){return a.id};this.getName=function(){return a.name};this.getIp=function(){return a.ip}}
window.Administrator=function(a){function b(g){d=g;c("caches",g)}var c=Y(this).changed;a.deployment||(a.deployment={});a.interserverCommunication||(a.interserverCommunication={});a.caches?b(new Cb(a.caches)):a.caches={};var d;a.authenticate||(a.authenticate={});var h=new rb(a.authenticate),l;this.getDeployment=function(){return l};this.setDeployment=function(g){l=g;a.deployment!==g&&(a.deployment=g.getParams());c("deployment",g)};this.getCaches=function(){return d};this.setCaches=b;var m;this.getInterserverCommunication=
function(){return m};this.setInterserverCommunication=function(g){m=g;a.interserverCommunication!==g&&(a.interserverCommunication=g.getParams());c("interserverCommunication",g)};this.getAuthenticate=function(){return h}};
window.AdministratorViewModel=function(a){function b(f){console.log(f);g.send(f)}function c(f){console.log(f);var n={type:"signIn"};n.usernameOrEmail=f.username;n.password=f.password;g.send(n)}function d(f){b(f)}function h(){return l}U(this);Y(this);var l,m={},g=new Kb(window,(m.url=Ga.getLongpollUrl("administraertor/endpoint_longpoll"),m.urlWebsocket=Ga.getWebsocketUrl("administrator/endpoint_websocket"),m.parameters={password:"this is frontend"},m));g.addEventListener("message",function(f){console.log(f);
f=f.msg;switch(f.type){case "state":console.log(f);a.setDeployment(f.deployment?new vb(f.deployment):null);break;case "set_version":a.getDeployment().setVersion(f.version);break;case "test_interserver_communication":(f.passed?console.log:console.error)(f.message);var n=a.getInterserverCommunication();n.setTestPassed(f.passed);n.setTesting(!1);break;case "test_interserver_communication_routing":(f.passed?console.log:console.error)(f.message);n=a.getInterserverCommunication();n.setTestRoutingPassed(f.passed);
n.setTestingRouting(!1);break;case "log":console.log("Backend says: ");console.log(f.msg);break;case "error":console.log("Backend says: "),console.error(f.msg)}});g.addEventListener("disposedByServer",function(){g.reset();l=null;e.setVisible(!0);a.setDeployment(null);a.setInterserverCommunication(null)});var k=new Oa(g,12E4),e;Z.carryOverChildModelAsChildViewModel(this,a,"interserverCommunication",function(f){return new zb(f)},function(f){f.onSendMessage=d});Z.carryOverChildModelAsChildViewModel(this,
a,"caches",function(f){if(!f)return null;var n={};return new Ib((n.model=f,n.getSessionId=h,n.ticketedSend=k,n))});Z.carryOverChildModelAsChildViewModel(this,a,"deployment",function(f){return new wb(f)},function(f){f.onSendMessage=d});Z.carryOverChildModelAsChildViewModel(this,a,"authenticate",function(f){var n={};n.ticketedSend=k;n.model=f;n[L.V]=g;return e=new tb(n)},function(f){f.addEventListener("signIn",c);f.setHideUponClickOff(!1);f.setVisible(!0)});e.addEventListener("authenticated",function(f){l=
f.sessionId;f={};g.send((f.type="get_state",f.sessionId=l,f));a.setInterserverCommunication(new yb({}));a.setCaches(new Cb({}))});this.sendMessage=b;this.pull=function(){g.send({type:"pull"})};Ba.add(function(){g.send({type:"leaving",sessionId:l})})};
window.AdministratorView=function(a){var b=X();b.classList.add("administrator");var c={className:"test-image",functionNameClick:"pull"};c.model=a;c=new Za(c);b.appendChild(c.getElement());Z.carryOverChildViewModelAsChildView(this,a,"interserverCommunication",function(d){return new Ab(d)},function(d,h){h&&b.removeChild(h.getElement());d&&b.appendChild(d.getElement())});Z.carryOverChildViewModelAsChildView(this,a,"deployment",function(d){return new xb(d)},function(d,h){h&&b.removeChild(h.getElement());
d&&b.appendChild(d.getElement())});Z.carryOverChildViewModelAsChildView(this,a,"authenticate",function(d){return new ub(d)},function(){});Z.carryOverChildViewModelAsChildView(this,a,"caches",function(d){var h={};return new Hb((h.model=d,h))},function(d,h){h&&b.removeChild(h.getElement());d&&b.appendChild(d.getElement())});this.getElement=function(){return b}};
var Kb=function(){function a(b,c){function d(){if(p)return p;(p=y.wouldLikeNewChannel())&&h(p)}function h(u){u.onClose=m;u.onOpen=g;u.onMessage=l;z.add(u.getAnalysis())}function l(u){"mysocket_id"==u.type?r=u.id:(f||(f=!0,e.dispatchEvent({type:"channelOpen"})),e.dispatchEvent({type:"message",msg:u}))}function m(){var u=p.getDisposedByServer();p=null;u?e.dispatchEvent({type:"disposedbyserver"}):B||setTimeout(d,0);k();e.dispatchEvent({type:"close"})}function g(){if(0<v.length)for(var u=new b.Iterator(v);u.hasNext();){var w=
u.next();try{p&&p.isOpen()&&p.send(w),u.remove()}catch(A){break}}else p&&p.isOpen()&&p.send({type:"hi"});e.dispatchEvent({type:"open"})}function k(){f&&(f=!1,e.dispatchEvent({type:"channelClose"}))}b.EventEnabledBuilder(this);var e=this,f=!1,n=c.url,q=c.parameters;c=c.urlWebsocket;var p,r,v=[],B=!1;this.reset=function(u){B=!0;r=null;v=[];p&&p.dispose();p=null;k();z.clear();u&&d()};this.send=function(u){B=!1;var w=d();w&&w.isOpen()?w.send(u):v.push(u)};this.getUrl=function(){return n};var z=new b.MysocketAnalysis(b,
{mysocket:this}),y=new b.MysocketChannelManager(b,{mysocketAnalysis:z,urlWebsocket:c,url:n,getId:function(){return r},parameters:q});y.addEventListener("newchannel",function(u){p=u.channel;h(p)});d()}a.JSONP="jsonp";a.LONGPOLL="longpoll";a.WEBSOCKET="websocket";return K.Mysocket=a}();
(function(){function a(b){function c(){return d().where(function(e){return 5E3>e.getOpenForMilliseconds()}).count()}function d(){return h().where(function(e){return e.getChannelType()==pb.WEBSOCKET})}function h(){for(var e=m.length-1,f=[],n=(new Date).getTime()-6E4;0<=e;){var q=m[e];if(n<q.getClosedAt())f.push(q);else break;e--}return f}function l(e){e=e.mysocketChannelAnalysis;e.removeEventListener("closed",l);for(m.push(e);20<m.length;)m.splice(0,1);e.getChannelType()}var m=[],g,k=b.When;this.getRecommendedTypes=
function(){var e=c(),f;(e=(b.WebSocket?!0:!1)&&!(f=0<e))&&f&&(e=6E4<(new Date).getTime()-f.getOpenedAt());return e?[pb.WEBSOCKET,pb.LONGPOLL]:[pb.LONGPOLL]};this.getRecommendedDelayBeforeCreatingChannel=function(){if(1>m.length)var e={type:k.NOW};else{e=0;for(var f=(new Date).getTime()-6E4,n=m.length-1;0<=n;n--)if(m[n].getOpenedAt()>f)e++;else break;e=3<e?{type:k.SECONDS,seconds:5}:2E3<(new Date).getTime()-m[m.length-1].getClosedAt()?{type:k.NOW}:{type:k.SECONDS,seconds:1}}return e};this.add=function(e){g=
e;e.addEventListener("closed",l)};this.clear=function(){g.closed();m=[];g=void 0}}return K.MysocketAnalysis=a})();
(function(){function a(b,c){b.EventEnabledBuilder(this);var d=this,h=!1,l=[],m,g,k=new b.StopWatch;this.getSuccessfullyOpened=function(){return h};this.getOpenForMilliseconds=k.getMilliseconds;this.getOpenForSeconds=k.getSeconds;this.getOpenedAt=function(){return m};this.getClosedAt=function(){return g};this.getChannelType=function(){return c};this.opened=function(){h=!0;m=(new Date).getTime();k.start()};this.receivedMessage=function(){};this.closed=function(){k.stop();g=(new Date).getTime();d.dispatchEvent({type:"closed",
mysocketChannelAnalysis:d})};this.error=function(e){for(l.push(e);30<l.length;)l.splice(0,1)}}return K.MysocketChannelAnalysis=a})();
new function(){function a(c,d,h,l){function m(){n||(n=!0,k.closed(),g.onClose&&g.onClose())}var g=this,k=new c.MysocketChannelAnalysis(c,pb.WEBSOCKET),e=!1;this.send=function(q){try{f.send(JSON.stringify(q))}catch(p){console.error(p);try{f.close()}catch(r){}m()}};this.getAnalysis=function(){return k};this.getChannelType=function(){return pb.WEBSOCKET};this.isOpen=function(){return f&&f.readyState==f.OPEN};var f=new WebSocket(Ga.addParameters(h+(d?"?mysocketId="+d:""),l));f.onmessage=function(q){q=
q.data;void 0!==q&&null!==q&&""!==q&&(q=c.JSON.parse(q),q.mysocketId&&(d=q.mysocketId),q.disposed?(e=!0,f.close()):(k.receivedMessage(),g.onMessage&&g.onMessage(q)))};f.onopen=function(){k.opened();g.onOpen&&g.onOpen()};f.onclose=m;f.onerror=function(q){k.error(q);g.onError&&g.onError(q)};this.close=function(){try{f.close()}catch(q){console.error(q)}m()};this.getDisposedByServer=function(){return e};c.channel=this;var n=!1}function b(c,d,h,l){function m(){k||(k=!0,f.dispose(),e.closed(),g.onClose&&
g.onClose())}var g=this,k=!1,e=new c.MysocketChannelAnalysis(c,pb.LONGPOLL),f=new c.Longpoll(c,{url:h,id:d});f.onMessage=function(n){e.receivedMessage();g.onMessage&&g.onMessage(n)};f.onError=function(n){e.error(n);m();g.onError&&g.onError(n)};f.onSent=function(){};f.onDispose=function(){m()};c.channel=this;this.close=m;this.send=f.send;this.getAnalysis=function(){return e};this.getChannelType=function(){return pb.LONGPOLL};this.getDisposedByServer=f.getDisposedByServer;setTimeout(function(){e.opened();
l&&g.send(l);g.onOpen&&g.onOpen()},0);this.isOpen=function(){return!k}}K.MysocketChannelFactory=this;this.create=function(c,d){var h=d.mysocketAnalysis.getRecommendedTypes(),l=d.parameters;switch(h[0]){case c.Mysocket.WEBSOCKET:return new a(c,d.id,d.urlWebsocket,l);default:return new b(c,d.id,d.url,l)}}};
(function(){function a(b,c){function d(){h();l.dispatchEvent({type:"newchannel",channel:n});q=!1}function h(){return n=b.MysocketChannelFactory.create(b,{id:f(),urlWebsocket:k,url:g,mysocketAnalysis:m,parameters:e})}b.EventEnabledBuilder(this);var l=this,m=c.mysocketAnalysis,g=c.url,k=c.urlWebsocket,e=c.parameters,f=c.getId,n,q=!1,p=b.When;this.wouldLikeNewChannel=function(){if(!q){var r=m.getRecommendedDelayBeforeCreatingChannel();switch(r.type){case p.NOW:return h();case p.SECONDS:r=1E3*r.seconds,
q=!0,(new b.Timer({delay:r,callback:d,nTicks:1})).start()}}}}return K.MysocketChannelManager=a})();
window.Administrator=function(a){function b(g){d=g;c("caches",g)}var c=Y(this).changed;a.deployment||(a.deployment={});a.interserverCommunication||(a.interserverCommunication={});a.caches?b(new Cb(a.caches)):a.caches={};var d;a.authenticate||(a.authenticate={});var h=new rb(a.authenticate),l;this.getDeployment=function(){return l};this.setDeployment=function(g){l=g;a.deployment!==g&&(a.deployment=g.getParams());c("deployment",g)};this.getCaches=function(){return d};this.setCaches=b;var m;this.getInterserverCommunication=
function(){return m};this.setInterserverCommunication=function(g){m=g;a.interserverCommunication!==g&&(a.interserverCommunication=g.getParams());c("interserverCommunication",g)};this.getAuthenticate=function(){return h}};})();